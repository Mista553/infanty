ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"master_process.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "modules/master_machine/master_process.c"
  20              		.section	.text.VisionOfflineCallback,"ax",%progbits
  21              		.align	1
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	VisionOfflineCallback:
  27              	.LVL0:
  28              	.LFB273:
   1:modules/master_machine/master_process.c **** /**
   2:modules/master_machine/master_process.c ****  * @file master_process.c
   3:modules/master_machine/master_process.c ****  * @author neozng
   4:modules/master_machine/master_process.c ****  * @brief  module for recv&send vision data
   5:modules/master_machine/master_process.c ****  * @version beta
   6:modules/master_machine/master_process.c ****  * @date 2022-11-03
   7:modules/master_machine/master_process.c ****  * @todo å¢åŠ å¯¹ä¸²å£è°ƒè¯•åŠ©æ‰‹åè®®çš„æ”¯æŒ,åŒ…æ‹¬vofaå’Œserial debug
   8:modules/master_machine/master_process.c ****  * @copyright Copyright (c) 2022
   9:modules/master_machine/master_process.c ****  *
  10:modules/master_machine/master_process.c ****  */
  11:modules/master_machine/master_process.c **** #include "master_process.h"
  12:modules/master_machine/master_process.c **** #include "seasky_protocol.h"
  13:modules/master_machine/master_process.c **** #include "daemon.h"
  14:modules/master_machine/master_process.c **** #include "bsp_log.h"
  15:modules/master_machine/master_process.c **** #include "robot_def.h"
  16:modules/master_machine/master_process.c **** 
  17:modules/master_machine/master_process.c **** static Vision_Recv_s recv_data;
  18:modules/master_machine/master_process.c **** static Vision_Send_s send_data;
  19:modules/master_machine/master_process.c **** static DaemonInstance *vision_daemon_instance;
  20:modules/master_machine/master_process.c **** 
  21:modules/master_machine/master_process.c **** void VisionSetFlag(Enemy_Color_e enemy_color)
  22:modules/master_machine/master_process.c **** {
  23:modules/master_machine/master_process.c ****     send_data.enemy_color = enemy_color;
  24:modules/master_machine/master_process.c **** }
  25:modules/master_machine/master_process.c **** 
  26:modules/master_machine/master_process.c **** void VisionSetAltitude(float yaw, float pitch, float roll)
  27:modules/master_machine/master_process.c **** {
  28:modules/master_machine/master_process.c ****     send_data.yaw = yaw;
  29:modules/master_machine/master_process.c ****     send_data.pitch = -pitch;
  30:modules/master_machine/master_process.c ****     send_data.roll =  -roll;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s 			page 2


  31:modules/master_machine/master_process.c **** }
  32:modules/master_machine/master_process.c **** 
  33:modules/master_machine/master_process.c **** /**
  34:modules/master_machine/master_process.c ****  * @brief ç¦»çº¿å›è°ƒå‡½æ•°,å°†åœ¨daemon.cä¸­è¢«daemon taskè°ƒç”¨
  35:modules/master_machine/master_process.c ****  * @attention ç”±äºHALåº“çš„è®¾è®¡é—®é¢˜,ä¸²å£å¼€å¯DMAæ¥æ”¶ä¹‹ååŒæ—¶å‘é€æœ‰æ¦‚ç‡å‡ºç°__H
  36:modules/master_machine/master_process.c ****  *            è¿›å…¥æ¥æ”¶ä¸­æ–­.é€šè¿‡daemonåˆ¤æ–­æ•°æ®æ›´æ–°,é‡æ–°è°ƒç”¨æœåŠ¡å¯åŠ¨å‡½æ•°ä»¥è§
  37:modules/master_machine/master_process.c ****  *
  38:modules/master_machine/master_process.c ****  * @param id vision_usart_instanceçš„åœ°å€,æ­¤å¤„æ²¡ç”¨.
  39:modules/master_machine/master_process.c ****  */
  40:modules/master_machine/master_process.c **** static void VisionOfflineCallback(void *id)
  41:modules/master_machine/master_process.c **** {
  29              		.loc 1 41 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  42:modules/master_machine/master_process.c **** #ifdef VISION_USE_UART
  43:modules/master_machine/master_process.c ****     USARTServiceInit(vision_usart_instance);
  44:modules/master_machine/master_process.c **** #endif // !VISION_USE_UART
  45:modules/master_machine/master_process.c ****     LOGWARNING("[vision] vision offline, restart communication.");
  34              		.loc 1 45 66 view .LVU1
  46:modules/master_machine/master_process.c **** }
  35              		.loc 1 46 1 is_stmt 0 view .LVU2
  36 0000 7047     		bx	lr
  37              		.cfi_endproc
  38              	.LFE273:
  40              		.section	.text.DecodeVision,"ax",%progbits
  41              		.align	1
  42              		.syntax unified
  43              		.thumb
  44              		.thumb_func
  46              	DecodeVision:
  47              	.LVL1:
  48              	.LFB275:
  47:modules/master_machine/master_process.c **** 
  48:modules/master_machine/master_process.c **** #ifdef VISION_USE_UART
  49:modules/master_machine/master_process.c **** 
  50:modules/master_machine/master_process.c **** #include "bsp_usart.h"
  51:modules/master_machine/master_process.c **** 
  52:modules/master_machine/master_process.c **** static USARTInstance *vision_usart_instance;
  53:modules/master_machine/master_process.c **** 
  54:modules/master_machine/master_process.c **** /**
  55:modules/master_machine/master_process.c ****  * @brief æ¥æ”¶è§£åŒ…å›è°ƒå‡½æ•°,å°†åœ¨bsp_usart.cä¸­è¢«usart rx callbackè°ƒç”¨
  56:modules/master_machine/master_process.c ****  * @todo  1.æé«˜å¯è¯»æ€§,å°†get_protocol_infoçš„ç¬¬å››ä¸ªå‚æ•°å¢åŠ ä¸€ä¸ªfloatç±»å‹buffer
  57:modules/master_machine/master_process.c ****  *        2.æ·»åŠ æ ‡å¿—ä½è§£ç 
  58:modules/master_machine/master_process.c ****  */
  59:modules/master_machine/master_process.c **** static void DecodeVision()
  60:modules/master_machine/master_process.c **** {
  61:modules/master_machine/master_process.c ****     uint16_t flag_register;
  62:modules/master_machine/master_process.c ****     DaemonReload(vision_daemon_instance); // å–‚ç‹—
  63:modules/master_machine/master_process.c ****     get_protocol_info(vision_usart_instance->recv_buff, &flag_register, (uint8_t *)&recv_data.pitch
  64:modules/master_machine/master_process.c ****     // TODO: code to resolve flag_register;
  65:modules/master_machine/master_process.c **** }
  66:modules/master_machine/master_process.c **** 
  67:modules/master_machine/master_process.c **** Vision_Recv_s *VisionInit(UART_HandleTypeDef *_handle)
  68:modules/master_machine/master_process.c **** {
  69:modules/master_machine/master_process.c ****     USART_Init_Config_s conf;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s 			page 3


  70:modules/master_machine/master_process.c ****     conf.module_callback = DecodeVision;
  71:modules/master_machine/master_process.c ****     conf.recv_buff_size = VISION_RECV_SIZE;
  72:modules/master_machine/master_process.c ****     conf.usart_handle = _handle;
  73:modules/master_machine/master_process.c ****     vision_usart_instance = USARTRegister(&conf);
  74:modules/master_machine/master_process.c **** 
  75:modules/master_machine/master_process.c ****     // ä¸ºmaster processæ³¨å†Œdaemon,ç”¨äºåˆ¤æ–­è§†è§‰é€šä¿¡æ˜¯å¦ç¦»çº¿
  76:modules/master_machine/master_process.c ****     Daemon_Init_Config_s daemon_conf = {
  77:modules/master_machine/master_process.c ****         .callback = VisionOfflineCallback, // ç¦»çº¿æ—¶è°ƒç”¨çš„å›è°ƒå‡½æ•°,ä¼šé‡å¯ä¸²å£æ¥æ”¶
  78:modules/master_machine/master_process.c ****         .owner_id = vision_usart_instance,
  79:modules/master_machine/master_process.c ****         .reload_count = 10,
  80:modules/master_machine/master_process.c ****     };
  81:modules/master_machine/master_process.c ****     vision_daemon_instance = DaemonRegister(&daemon_conf);
  82:modules/master_machine/master_process.c **** 
  83:modules/master_machine/master_process.c ****     return &recv_data;
  84:modules/master_machine/master_process.c **** }
  85:modules/master_machine/master_process.c **** 
  86:modules/master_machine/master_process.c **** /**
  87:modules/master_machine/master_process.c ****  * @brief å‘é€å‡½æ•°
  88:modules/master_machine/master_process.c ****  *
  89:modules/master_machine/master_process.c ****  * @param send å¾…å‘é€æ•°æ®
  90:modules/master_machine/master_process.c ****  *
  91:modules/master_machine/master_process.c ****  */
  92:modules/master_machine/master_process.c **** void VisionSend()
  93:modules/master_machine/master_process.c **** {
  94:modules/master_machine/master_process.c ****     // buffå’Œtxlenå¿…é¡»ä¸ºstatic,æ‰èƒ½ä¿è¯åœ¨å‡½æ•°é€€å‡ºåä¸è¢«é‡Šæ”¾,ä½¿å¾—DMAæ­£ç¡®å®Œæˆ
  95:modules/master_machine/master_process.c ****     // ææ„åçš„é™·é˜±éœ€è¦ç‰¹åˆ«æ³¨æ„!
  96:modules/master_machine/master_process.c ****     static uint16_t flag_register;
  97:modules/master_machine/master_process.c ****     static uint8_t send_buff[VISION_SEND_SIZE];
  98:modules/master_machine/master_process.c ****     static uint16_t tx_len;
  99:modules/master_machine/master_process.c ****     // TODO: code to set flag_register
 100:modules/master_machine/master_process.c ****     flag_register = 30 << 8 | 0b00000001;
 101:modules/master_machine/master_process.c ****     // å°†æ•°æ®è½¬åŒ–ä¸ºseaskyåè®®çš„æ•°æ®åŒ…
 102:modules/master_machine/master_process.c ****     get_protocol_send_data(0x02, flag_register, &send_data.yaw, 3, send_buff, &tx_len);
 103:modules/master_machine/master_process.c ****     USARTSend(vision_usart_instance, send_buff, tx_len, USART_TRANSFER_DMA); // å’Œè§†è§‰é€šä¿¡ä½¿ç
 104:modules/master_machine/master_process.c ****     // æ­¤å¤„ä¸ºHALè®¾è®¡çš„ç¼ºé™·,DMASTOPä¼šåœæ­¢å‘é€å’Œæ¥æ”¶,å¯¼è‡´å†ä¹Ÿæ— æ³•è¿›å…¥æ¥æ”¶ä¸
 105:modules/master_machine/master_process.c ****     // ä¹Ÿå¯åœ¨å‘é€å®Œæˆä¸­æ–­ä¸­é‡æ–°å¯åŠ¨DMAæ¥æ”¶,ä½†è¾ƒä¸ºå¤æ‚.å› æ­¤,æ­¤å¤„ä½¿ç”¨ITå‘
 106:modules/master_machine/master_process.c ****     // è‹¥ä½¿ç”¨äº†daemon,åˆ™ä¹Ÿå¯ä»¥ä½¿ç”¨DMAå‘é€.
 107:modules/master_machine/master_process.c **** }
 108:modules/master_machine/master_process.c **** 
 109:modules/master_machine/master_process.c **** #endif // VISION_USE_UART
 110:modules/master_machine/master_process.c **** 
 111:modules/master_machine/master_process.c **** #ifdef VISION_USE_VCP
 112:modules/master_machine/master_process.c **** 
 113:modules/master_machine/master_process.c **** #include "bsp_usb.h"
 114:modules/master_machine/master_process.c **** static uint8_t *vis_recv_buff;
 115:modules/master_machine/master_process.c **** 
 116:modules/master_machine/master_process.c **** static void DecodeVision(uint16_t recv_len)
 117:modules/master_machine/master_process.c **** {
  49              		.loc 1 117 1 is_stmt 1 view -0
  50              		.cfi_startproc
  51              		@ args = 0, pretend = 0, frame = 8
  52              		@ frame_needed = 0, uses_anonymous_args = 0
  53              		.loc 1 117 1 is_stmt 0 view .LVU4
  54 0000 00B5     		push	{lr}
  55              	.LCFI0:
  56              		.cfi_def_cfa_offset 4
  57              		.cfi_offset 14, -4
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s 			page 4


  58 0002 83B0     		sub	sp, sp, #12
  59              	.LCFI1:
  60              		.cfi_def_cfa_offset 16
 118:modules/master_machine/master_process.c ****     uint16_t flag_register;
  61              		.loc 1 118 5 is_stmt 1 view .LVU5
 119:modules/master_machine/master_process.c ****     get_protocol_info(vis_recv_buff, &flag_register, (uint8_t *)&recv_data.target_state);
  62              		.loc 1 119 5 view .LVU6
  63 0004 044A     		ldr	r2, .L4
  64 0006 0DF10601 		add	r1, sp, #6
  65 000a 044B     		ldr	r3, .L4+4
  66 000c 1868     		ldr	r0, [r3]
  67              	.LVL2:
  68              		.loc 1 119 5 is_stmt 0 view .LVU7
  69 000e FFF7FEFF 		bl	get_protocol_info
  70              	.LVL3:
 120:modules/master_machine/master_process.c ****     // TODO: code to resolve flag_register;
 121:modules/master_machine/master_process.c **** }
  71              		.loc 1 121 1 view .LVU8
  72 0012 03B0     		add	sp, sp, #12
  73              	.LCFI2:
  74              		.cfi_def_cfa_offset 4
  75              		@ sp needed
  76 0014 5DF804FB 		ldr	pc, [sp], #4
  77              	.L5:
  78              		.align	2
  79              	.L4:
  80 0018 00000000 		.word	recv_data
  81 001c 00000000 		.word	vis_recv_buff
  82              		.cfi_endproc
  83              	.LFE275:
  85              		.section	.text.VisionSetFlag,"ax",%progbits
  86              		.align	1
  87              		.global	VisionSetFlag
  88              		.syntax unified
  89              		.thumb
  90              		.thumb_func
  92              	VisionSetFlag:
  93              	.LVL4:
  94              	.LFB271:
  22:modules/master_machine/master_process.c ****     send_data.enemy_color = enemy_color;
  95              		.loc 1 22 1 is_stmt 1 view -0
  96              		.cfi_startproc
  97              		@ args = 0, pretend = 0, frame = 0
  98              		@ frame_needed = 0, uses_anonymous_args = 0
  99              		@ link register save eliminated.
  23:modules/master_machine/master_process.c **** }
 100              		.loc 1 23 5 view .LVU10
  23:modules/master_machine/master_process.c **** }
 101              		.loc 1 23 27 is_stmt 0 view .LVU11
 102 0000 014B     		ldr	r3, .L7
 103 0002 1870     		strb	r0, [r3]
  24:modules/master_machine/master_process.c **** 
 104              		.loc 1 24 1 view .LVU12
 105 0004 7047     		bx	lr
 106              	.L8:
 107 0006 00BF     		.align	2
 108              	.L7:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s 			page 5


 109 0008 00000000 		.word	send_data
 110              		.cfi_endproc
 111              	.LFE271:
 113              		.section	.text.VisionSetAltitude,"ax",%progbits
 114              		.align	1
 115              		.global	VisionSetAltitude
 116              		.syntax unified
 117              		.thumb
 118              		.thumb_func
 120              	VisionSetAltitude:
 121              	.LVL5:
 122              	.LFB272:
  27:modules/master_machine/master_process.c ****     send_data.yaw = yaw;
 123              		.loc 1 27 1 is_stmt 1 view -0
 124              		.cfi_startproc
 125              		@ args = 0, pretend = 0, frame = 0
 126              		@ frame_needed = 0, uses_anonymous_args = 0
 127              		@ link register save eliminated.
  28:modules/master_machine/master_process.c ****     send_data.pitch = -pitch;
 128              		.loc 1 28 5 view .LVU14
  28:modules/master_machine/master_process.c ****     send_data.pitch = -pitch;
 129              		.loc 1 28 19 is_stmt 0 view .LVU15
 130 0000 084B     		ldr	r3, .L10
 131 0002 10EE102A 		vmov	r2, s0
 132 0006 C3F80920 		str	r2, [r3, #9]	@ unaligned
  29:modules/master_machine/master_process.c ****     send_data.roll =  -roll;
 133              		.loc 1 29 5 is_stmt 1 view .LVU16
  29:modules/master_machine/master_process.c ****     send_data.roll =  -roll;
 134              		.loc 1 29 21 is_stmt 0 view .LVU17
 135 000a F1EE607A 		vneg.f32	s15, s1
 136 000e 17EE902A 		vmov	r2, s15
 137 0012 C3F80520 		str	r2, [r3, #5]	@ unaligned
  30:modules/master_machine/master_process.c **** }
 138              		.loc 1 30 5 is_stmt 1 view .LVU18
  30:modules/master_machine/master_process.c **** }
 139              		.loc 1 30 20 is_stmt 0 view .LVU19
 140 0016 F1EE417A 		vneg.f32	s15, s2
 141 001a 17EE902A 		vmov	r2, s15
 142 001e C3F80120 		str	r2, [r3, #1]	@ unaligned
  31:modules/master_machine/master_process.c **** 
 143              		.loc 1 31 1 view .LVU20
 144 0022 7047     		bx	lr
 145              	.L11:
 146              		.align	2
 147              	.L10:
 148 0024 00000000 		.word	send_data
 149              		.cfi_endproc
 150              	.LFE272:
 152              		.section	.text.VisionInit,"ax",%progbits
 153              		.align	1
 154              		.global	VisionInit
 155              		.syntax unified
 156              		.thumb
 157              		.thumb_func
 159              	VisionInit:
 160              	.LVL6:
 161              	.LFB276:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s 			page 6


 122:modules/master_machine/master_process.c **** 
 123:modules/master_machine/master_process.c **** /* è§†è§‰é€šä¿¡åˆå§‹åŒ– */
 124:modules/master_machine/master_process.c **** Vision_Recv_s *VisionInit(UART_HandleTypeDef *_handle)
 125:modules/master_machine/master_process.c **** {
 162              		.loc 1 125 1 is_stmt 1 view -0
 163              		.cfi_startproc
 164              		@ args = 0, pretend = 0, frame = 24
 165              		@ frame_needed = 0, uses_anonymous_args = 0
 166              		.loc 1 125 1 is_stmt 0 view .LVU22
 167 0000 10B5     		push	{r4, lr}
 168              	.LCFI3:
 169              		.cfi_def_cfa_offset 8
 170              		.cfi_offset 4, -8
 171              		.cfi_offset 14, -4
 172 0002 86B0     		sub	sp, sp, #24
 173              	.LCFI4:
 174              		.cfi_def_cfa_offset 32
 126:modules/master_machine/master_process.c ****     UNUSED(_handle); // ä»…ä¸ºäº†æ¶ˆé™¤è­¦å‘Š
 175              		.loc 1 126 5 is_stmt 1 view .LVU23
 127:modules/master_machine/master_process.c ****     USB_Init_Config_s conf = {.rx_cbk = DecodeVision};
 176              		.loc 1 127 5 view .LVU24
 177              		.loc 1 127 23 is_stmt 0 view .LVU25
 178 0004 04AB     		add	r3, sp, #16
 179 0006 0024     		movs	r4, #0
 180 0008 0494     		str	r4, [sp, #16]
 181 000a 0594     		str	r4, [sp, #20]
 182 000c 0B4A     		ldr	r2, .L14
 183 000e 0592     		str	r2, [sp, #20]
 128:modules/master_machine/master_process.c ****     vis_recv_buff = USBInit(conf);
 184              		.loc 1 128 5 is_stmt 1 view .LVU26
 185              		.loc 1 128 21 is_stmt 0 view .LVU27
 186 0010 93E80300 		ldm	r3, {r0, r1}
 187              	.LVL7:
 188              		.loc 1 128 21 view .LVU28
 189 0014 FFF7FEFF 		bl	USBInit
 190              	.LVL8:
 191              		.loc 1 128 19 discriminator 1 view .LVU29
 192 0018 094B     		ldr	r3, .L14+4
 193 001a 1860     		str	r0, [r3]
 129:modules/master_machine/master_process.c **** 
 130:modules/master_machine/master_process.c ****     // ä¸ºmaster processæ³¨å†Œdaemon,ç”¨äºåˆ¤æ–­è§†è§‰é€šä¿¡æ˜¯å¦ç¦»çº¿
 131:modules/master_machine/master_process.c ****     Daemon_Init_Config_s daemon_conf = {
 194              		.loc 1 131 5 is_stmt 1 view .LVU30
 195              		.loc 1 131 26 is_stmt 0 view .LVU31
 196 001c 0194     		str	r4, [sp, #4]
 197 001e 0294     		str	r4, [sp, #8]
 198 0020 0394     		str	r4, [sp, #12]
 199 0022 0523     		movs	r3, #5
 200 0024 ADF80430 		strh	r3, [sp, #4]	@ movhi
 201 0028 064B     		ldr	r3, .L14+8
 202 002a 0293     		str	r3, [sp, #8]
 132:modules/master_machine/master_process.c ****         .callback = VisionOfflineCallback, // ç¦»çº¿æ—¶è°ƒç”¨çš„å›è°ƒå‡½æ•°,ä¼šé‡å¯ä¸²å£æ¥æ”¶
 133:modules/master_machine/master_process.c ****         .owner_id = NULL,
 134:modules/master_machine/master_process.c ****         .reload_count = 5, // 50ms
 135:modules/master_machine/master_process.c ****     };
 136:modules/master_machine/master_process.c ****     vision_daemon_instance = DaemonRegister(&daemon_conf);
 203              		.loc 1 136 5 is_stmt 1 view .LVU32
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s 			page 7


 204              		.loc 1 136 30 is_stmt 0 view .LVU33
 205 002c 01A8     		add	r0, sp, #4
 206 002e FFF7FEFF 		bl	DaemonRegister
 207              	.LVL9:
 208              		.loc 1 136 28 discriminator 1 view .LVU34
 209 0032 054B     		ldr	r3, .L14+12
 210 0034 1860     		str	r0, [r3]
 137:modules/master_machine/master_process.c **** 
 138:modules/master_machine/master_process.c ****     return &recv_data;
 211              		.loc 1 138 5 is_stmt 1 view .LVU35
 139:modules/master_machine/master_process.c **** }
 212              		.loc 1 139 1 is_stmt 0 view .LVU36
 213 0036 0548     		ldr	r0, .L14+16
 214 0038 06B0     		add	sp, sp, #24
 215              	.LCFI5:
 216              		.cfi_def_cfa_offset 8
 217              		@ sp needed
 218 003a 10BD     		pop	{r4, pc}
 219              	.L15:
 220              		.align	2
 221              	.L14:
 222 003c 00000000 		.word	DecodeVision
 223 0040 00000000 		.word	vis_recv_buff
 224 0044 00000000 		.word	VisionOfflineCallback
 225 0048 00000000 		.word	vision_daemon_instance
 226 004c 00000000 		.word	recv_data
 227              		.cfi_endproc
 228              	.LFE276:
 230              		.section	.text.VisionSend,"ax",%progbits
 231              		.align	1
 232              		.global	VisionSend
 233              		.syntax unified
 234              		.thumb
 235              		.thumb_func
 237              	VisionSend:
 238              	.LFB277:
 140:modules/master_machine/master_process.c **** 
 141:modules/master_machine/master_process.c **** void VisionSend()
 142:modules/master_machine/master_process.c **** {
 239              		.loc 1 142 1 is_stmt 1 view -0
 240              		.cfi_startproc
 241              		@ args = 0, pretend = 0, frame = 0
 242              		@ frame_needed = 0, uses_anonymous_args = 0
 243 0000 30B5     		push	{r4, r5, lr}
 244              	.LCFI6:
 245              		.cfi_def_cfa_offset 12
 246              		.cfi_offset 4, -12
 247              		.cfi_offset 5, -8
 248              		.cfi_offset 14, -4
 249 0002 83B0     		sub	sp, sp, #12
 250              	.LCFI7:
 251              		.cfi_def_cfa_offset 24
 143:modules/master_machine/master_process.c ****     static uint16_t flag_register;
 252              		.loc 1 143 5 view .LVU38
 144:modules/master_machine/master_process.c ****     static uint8_t send_buff[VISION_SEND_SIZE];
 253              		.loc 1 144 5 view .LVU39
 145:modules/master_machine/master_process.c ****     static uint16_t tx_len;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s 			page 8


 254              		.loc 1 145 5 view .LVU40
 146:modules/master_machine/master_process.c ****     // TODO: code to set flag_register
 147:modules/master_machine/master_process.c ****     flag_register = 30 << 8 | 0b00000001;
 255              		.loc 1 147 5 view .LVU41
 256              		.loc 1 147 19 is_stmt 0 view .LVU42
 257 0004 41F60161 		movw	r1, #7681
 258 0008 084B     		ldr	r3, .L18
 259 000a 1980     		strh	r1, [r3]	@ movhi
 148:modules/master_machine/master_process.c ****     // å°†æ•°æ®è½¬åŒ–ä¸ºseaskyåè®®çš„æ•°æ®åŒ…
 149:modules/master_machine/master_process.c ****     get_protocol_send_data(send_data.enemy_color, flag_register, &send_data.roll, 3, send_buff, &tx
 260              		.loc 1 149 5 is_stmt 1 view .LVU43
 261              		.loc 1 149 37 is_stmt 0 view .LVU44
 262 000c 084A     		ldr	r2, .L18+4
 263 000e 12F8010B 		ldrb	r0, [r2], #1	@ zero_extendqisi2
 264              		.loc 1 149 5 view .LVU45
 265 0012 084D     		ldr	r5, .L18+8
 266 0014 0195     		str	r5, [sp, #4]
 267 0016 084C     		ldr	r4, .L18+12
 268 0018 0094     		str	r4, [sp]
 269 001a 0323     		movs	r3, #3
 270 001c FFF7FEFF 		bl	get_protocol_send_data
 271              	.LVL10:
 150:modules/master_machine/master_process.c ****     USBTransmit(send_buff, tx_len);
 272              		.loc 1 150 5 is_stmt 1 view .LVU46
 273 0020 2988     		ldrh	r1, [r5]
 274 0022 2046     		mov	r0, r4
 275 0024 FFF7FEFF 		bl	USBTransmit
 276              	.LVL11:
 151:modules/master_machine/master_process.c **** }
 277              		.loc 1 151 1 is_stmt 0 view .LVU47
 278 0028 03B0     		add	sp, sp, #12
 279              	.LCFI8:
 280              		.cfi_def_cfa_offset 12
 281              		@ sp needed
 282 002a 30BD     		pop	{r4, r5, pc}
 283              	.L19:
 284              		.align	2
 285              	.L18:
 286 002c 00000000 		.word	flag_register.2
 287 0030 00000000 		.word	send_data
 288 0034 00000000 		.word	tx_len.0
 289 0038 00000000 		.word	send_buff.1
 290              		.cfi_endproc
 291              	.LFE277:
 293              		.section	.bss.tx_len.0,"aw",%nobits
 294              		.align	1
 297              	tx_len.0:
 298 0000 0000     		.space	2
 299              		.section	.bss.send_buff.1,"aw",%nobits
 300              		.align	2
 303              	send_buff.1:
 304 0000 00000000 		.space	24
 304      00000000 
 304      00000000 
 304      00000000 
 304      00000000 
 305              		.section	.bss.flag_register.2,"aw",%nobits
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s 			page 9


 306              		.align	1
 309              	flag_register.2:
 310 0000 0000     		.space	2
 311              		.section	.bss.vis_recv_buff,"aw",%nobits
 312              		.align	2
 315              	vis_recv_buff:
 316 0000 00000000 		.space	4
 317              		.section	.bss.vision_daemon_instance,"aw",%nobits
 318              		.align	2
 321              	vision_daemon_instance:
 322 0000 00000000 		.space	4
 323              		.section	.bss.send_data,"aw",%nobits
 324              		.align	2
 327              	send_data:
 328 0000 00000000 		.space	13
 328      00000000 
 328      00000000 
 328      00
 329              		.section	.bss.recv_data,"aw",%nobits
 330              		.align	2
 333              	recv_data:
 334 0000 00000000 		.space	14
 334      00000000 
 334      00000000 
 334      0000
 335              		.text
 336              	.Letext0:
 337              		.file 2 "D:/Msys2/mingw64/arm-none-eabi/include/machine/_default_types.h"
 338              		.file 3 "D:/Msys2/mingw64/arm-none-eabi/include/sys/_stdint.h"
 339              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 340              		.file 5 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 341              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 342              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 343              		.file 8 "modules/master_machine/master_process.h"
 344              		.file 9 "modules/daemon/daemon.h"
 345              		.file 10 "Inc/usbd_cdc_if.h"
 346              		.file 11 "bsp/usb/bsp_usb.h"
 347              		.file 12 "modules/master_machine/seasky_protocol.h"
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s 			page 10


DEFINED SYMBOLS
                            *ABS*:00000000 master_process.c
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:21     .text.VisionOfflineCallback:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:26     .text.VisionOfflineCallback:00000000 VisionOfflineCallback
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:41     .text.DecodeVision:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:46     .text.DecodeVision:00000000 DecodeVision
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:80     .text.DecodeVision:00000018 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:333    .bss.recv_data:00000000 recv_data
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:315    .bss.vis_recv_buff:00000000 vis_recv_buff
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:86     .text.VisionSetFlag:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:92     .text.VisionSetFlag:00000000 VisionSetFlag
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:109    .text.VisionSetFlag:00000008 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:327    .bss.send_data:00000000 send_data
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:114    .text.VisionSetAltitude:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:120    .text.VisionSetAltitude:00000000 VisionSetAltitude
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:148    .text.VisionSetAltitude:00000024 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:153    .text.VisionInit:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:159    .text.VisionInit:00000000 VisionInit
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:222    .text.VisionInit:0000003c $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:321    .bss.vision_daemon_instance:00000000 vision_daemon_instance
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:231    .text.VisionSend:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:237    .text.VisionSend:00000000 VisionSend
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:286    .text.VisionSend:0000002c $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:309    .bss.flag_register.2:00000000 flag_register.2
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:297    .bss.tx_len.0:00000000 tx_len.0
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:303    .bss.send_buff.1:00000000 send_buff.1
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:294    .bss.tx_len.0:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:300    .bss.send_buff.1:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:306    .bss.flag_register.2:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:312    .bss.vis_recv_buff:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:318    .bss.vision_daemon_instance:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:324    .bss.send_data:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc8PyCQK.s:330    .bss.recv_data:00000000 $d

UNDEFINED SYMBOLS
get_protocol_info
USBInit
DaemonRegister
get_protocol_send_data
USBTransmit
