ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"dmmotor.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "modules/motor/DMmotor/dmmotor.c"
  20              		.section	.text.float_to_uint,"ax",%progbits
  21              		.align	1
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	float_to_uint:
  27              	.LVL0:
  28              	.LFB276:
   1:modules/motor/DMmotor/dmmotor.c **** #include "dmmotor.h"
   2:modules/motor/DMmotor/dmmotor.c **** #include "memory.h"
   3:modules/motor/DMmotor/dmmotor.c **** #include "general_def.h"
   4:modules/motor/DMmotor/dmmotor.c **** #include "user_lib.h"
   5:modules/motor/DMmotor/dmmotor.c **** #include "cmsis_os.h"
   6:modules/motor/DMmotor/dmmotor.c **** #include "string.h"
   7:modules/motor/DMmotor/dmmotor.c **** #include "daemon.h"
   8:modules/motor/DMmotor/dmmotor.c **** #include "stdlib.h"
   9:modules/motor/DMmotor/dmmotor.c **** #include "bsp_log.h"
  10:modules/motor/DMmotor/dmmotor.c **** 
  11:modules/motor/DMmotor/dmmotor.c **** static uint8_t idx;
  12:modules/motor/DMmotor/dmmotor.c **** static DMMotorInstance *dm_motor_instance[DM_MOTOR_CNT];
  13:modules/motor/DMmotor/dmmotor.c **** static osThreadId dm_task_handle[DM_MOTOR_CNT];
  14:modules/motor/DMmotor/dmmotor.c **** /* ‰∏§‰∏™Áî®‰∫éÂ∞ÜuintÂÄºÂíåfloatÂÄºËøõË°åÊò†Â∞ÑÁöÑÂáΩÊï∞,Âú®ËÆæÂÆöÂèëÈÄÅÂÄºÂíåËß£ÊûêÂèçÈ¶àÂÄºÊó∂‰Ω
  15:modules/motor/DMmotor/dmmotor.c **** static uint16_t float_to_uint(float x, float x_min, float x_max, uint8_t bits)
  16:modules/motor/DMmotor/dmmotor.c **** {
  29              		.loc 1 16 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  17:modules/motor/DMmotor/dmmotor.c ****     float span = x_max - x_min;
  34              		.loc 1 17 5 view .LVU1
  35              		.loc 1 17 11 is_stmt 0 view .LVU2
  36 0000 31EE601A 		vsub.f32	s2, s2, s1
  37              	.LVL1:
  18:modules/motor/DMmotor/dmmotor.c ****     float offset = x_min;
  38              		.loc 1 18 5 is_stmt 1 view .LVU3
  19:modules/motor/DMmotor/dmmotor.c ****     return (uint16_t)((x - offset) * ((float)((1 << bits) - 1)) / span);
  39              		.loc 1 19 5 view .LVU4
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 2


  40              		.loc 1 19 26 is_stmt 0 view .LVU5
  41 0004 30EE600A 		vsub.f32	s0, s0, s1
  42              	.LVL2:
  43              		.loc 1 19 50 view .LVU6
  44 0008 0123     		movs	r3, #1
  45 000a 8340     		lsls	r3, r3, r0
  46              		.loc 1 19 59 view .LVU7
  47 000c 013B     		subs	r3, r3, #1
  48              		.loc 1 19 39 view .LVU8
  49 000e 07EE903A 		vmov	s15, r3	@ int
  50 0012 F8EEE77A 		vcvt.f32.s32	s15, s15
  51              		.loc 1 19 36 view .LVU9
  52 0016 20EE270A 		vmul.f32	s0, s0, s15
  53              		.loc 1 19 65 view .LVU10
  54 001a C0EE017A 		vdiv.f32	s15, s0, s2
  55              		.loc 1 19 12 view .LVU11
  56 001e FCEEE77A 		vcvt.u32.f32	s15, s15
  20:modules/motor/DMmotor/dmmotor.c **** }
  57              		.loc 1 20 1 view .LVU12
  58 0022 17EE903A 		vmov	r3, s15	@ int
  59 0026 98B2     		uxth	r0, r3
  60              	.LVL3:
  61              		.loc 1 20 1 view .LVU13
  62 0028 7047     		bx	lr
  63              		.cfi_endproc
  64              	.LFE276:
  66              		.section	.text.uint_to_float,"ax",%progbits
  67              		.align	1
  68              		.syntax unified
  69              		.thumb
  70              		.thumb_func
  72              	uint_to_float:
  73              	.LVL4:
  74              	.LFB277:
  21:modules/motor/DMmotor/dmmotor.c **** static float uint_to_float(int x_int, float x_min, float x_max, int bits)
  22:modules/motor/DMmotor/dmmotor.c **** {
  75              		.loc 1 22 1 is_stmt 1 view -0
  76              		.cfi_startproc
  77              		@ args = 0, pretend = 0, frame = 0
  78              		@ frame_needed = 0, uses_anonymous_args = 0
  79              		@ link register save eliminated.
  80              		.loc 1 22 1 is_stmt 0 view .LVU15
  81 0000 07EE900A 		vmov	s15, r0	@ int
  23:modules/motor/DMmotor/dmmotor.c ****     float span = x_max - x_min;
  82              		.loc 1 23 5 is_stmt 1 view .LVU16
  83              		.loc 1 23 11 is_stmt 0 view .LVU17
  84 0004 70EEC00A 		vsub.f32	s1, s1, s0
  85              	.LVL5:
  24:modules/motor/DMmotor/dmmotor.c ****     float offset = x_min;
  86              		.loc 1 24 5 is_stmt 1 view .LVU18
  25:modules/motor/DMmotor/dmmotor.c ****     return ((float)x_int) * span / ((float)((1 << bits) - 1)) + offset;
  87              		.loc 1 25 5 view .LVU19
  88              		.loc 1 25 13 is_stmt 0 view .LVU20
  89 0008 F8EEE77A 		vcvt.f32.s32	s15, s15
  90              		.loc 1 25 27 view .LVU21
  91 000c 27EEA07A 		vmul.f32	s14, s15, s1
  92              		.loc 1 25 48 view .LVU22
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 3


  93 0010 0123     		movs	r3, #1
  94 0012 8B40     		lsls	r3, r3, r1
  95              		.loc 1 25 57 view .LVU23
  96 0014 013B     		subs	r3, r3, #1
  97              		.loc 1 25 37 view .LVU24
  98 0016 07EE903A 		vmov	s15, r3	@ int
  99 001a F8EEE77A 		vcvt.f32.s32	s15, s15
 100              		.loc 1 25 34 view .LVU25
 101 001e C7EE276A 		vdiv.f32	s13, s14, s15
  26:modules/motor/DMmotor/dmmotor.c **** }
 102              		.loc 1 26 1 view .LVU26
 103 0022 36EE800A 		vadd.f32	s0, s13, s0
 104              	.LVL6:
 105              		.loc 1 26 1 view .LVU27
 106 0026 7047     		bx	lr
 107              		.cfi_endproc
 108              	.LFE277:
 110              		.section	.text.DMMotorLostCallback,"ax",%progbits
 111              		.align	1
 112              		.syntax unified
 113              		.thumb
 114              		.thumb_func
 116              	DMMotorLostCallback:
 117              	.LVL7:
 118              	.LFB280:
  27:modules/motor/DMmotor/dmmotor.c **** 
  28:modules/motor/DMmotor/dmmotor.c **** static void DMMotorSetMode(DMMotor_Mode_e cmd, DMMotorInstance *motor)
  29:modules/motor/DMmotor/dmmotor.c **** {
  30:modules/motor/DMmotor/dmmotor.c ****     memset(motor->motor_can_instace->tx_buff, 0xff, 7);  // ÂèëÈÄÅÁîµÊú∫Êåá‰ª§ÁöÑÊó∂ÂÄôÂâçÈù¢7bytes
  31:modules/motor/DMmotor/dmmotor.c ****     motor->motor_can_instace->tx_buff[7] = (uint8_t)cmd; // ÊúÄÂêé‰∏Ä‰ΩçÊòØÂëΩ‰ª§id
  32:modules/motor/DMmotor/dmmotor.c ****     CANTransmit(motor->motor_can_instace, 1);
  33:modules/motor/DMmotor/dmmotor.c **** }
  34:modules/motor/DMmotor/dmmotor.c **** 
  35:modules/motor/DMmotor/dmmotor.c **** static void DMMotorDecode(CANInstance *motor_can)
  36:modules/motor/DMmotor/dmmotor.c **** {
  37:modules/motor/DMmotor/dmmotor.c ****     uint16_t tmp; // Áî®‰∫éÊöÇÂ≠òËß£ÊûêÂÄº,Á®çÂêéËΩ¨Êç¢ÊàêfloatÊï∞ÊçÆ,ÈÅøÂÖçÂ§öÊ¨°ÂàõÂª∫‰∏¥Êó∂ÂèòÈá
  38:modules/motor/DMmotor/dmmotor.c ****     uint8_t *rxbuff = motor_can->rx_buff;
  39:modules/motor/DMmotor/dmmotor.c ****     DMMotorInstance *motor = (DMMotorInstance *)motor_can->id;
  40:modules/motor/DMmotor/dmmotor.c ****     DM_Motor_Measure_s *measure = &(motor->measure); // Â∞ÜcanÂÆû‰æã‰∏≠‰øùÂ≠òÁöÑidËΩ¨Êç¢ÊàêÁîµÊú∫ÂÆ
  41:modules/motor/DMmotor/dmmotor.c **** 
  42:modules/motor/DMmotor/dmmotor.c ****     DaemonReload(motor->motor_daemon);
  43:modules/motor/DMmotor/dmmotor.c **** 
  44:modules/motor/DMmotor/dmmotor.c ****     measure->last_position = measure->position;
  45:modules/motor/DMmotor/dmmotor.c ****     tmp = (uint16_t)((rxbuff[1] << 8) | rxbuff[2]);
  46:modules/motor/DMmotor/dmmotor.c ****     measure->position = uint_to_float(tmp, DM_P_MIN, DM_P_MAX, 16);
  47:modules/motor/DMmotor/dmmotor.c **** 
  48:modules/motor/DMmotor/dmmotor.c ****     tmp = (uint16_t)((rxbuff[3] << 4) | rxbuff[4] >> 4);
  49:modules/motor/DMmotor/dmmotor.c ****     measure->velocity = uint_to_float(tmp, DM_V_MIN, DM_V_MAX, 12);
  50:modules/motor/DMmotor/dmmotor.c **** 
  51:modules/motor/DMmotor/dmmotor.c ****     tmp = (uint16_t)(((rxbuff[4] & 0x0f) << 8) | rxbuff[5]);
  52:modules/motor/DMmotor/dmmotor.c ****     measure->torque = uint_to_float(tmp, DM_T_MIN, DM_T_MAX, 12);
  53:modules/motor/DMmotor/dmmotor.c **** 
  54:modules/motor/DMmotor/dmmotor.c ****     measure->T_Mos = (float)rxbuff[6];
  55:modules/motor/DMmotor/dmmotor.c ****     measure->T_Rotor = (float)rxbuff[7];
  56:modules/motor/DMmotor/dmmotor.c **** }
  57:modules/motor/DMmotor/dmmotor.c **** 
  58:modules/motor/DMmotor/dmmotor.c **** static void DMMotorLostCallback(void *motor_ptr)
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 4


  59:modules/motor/DMmotor/dmmotor.c **** {
 119              		.loc 1 59 1 is_stmt 1 view -0
 120              		.cfi_startproc
 121              		@ args = 0, pretend = 0, frame = 0
 122              		@ frame_needed = 0, uses_anonymous_args = 0
 123              		@ link register save eliminated.
  60:modules/motor/DMmotor/dmmotor.c **** }
 124              		.loc 1 60 1 view .LVU29
 125 0000 7047     		bx	lr
 126              		.cfi_endproc
 127              	.LFE280:
 129              		.section	.text.DMMotorSetMode,"ax",%progbits
 130              		.align	1
 131              		.syntax unified
 132              		.thumb
 133              		.thumb_func
 135              	DMMotorSetMode:
 136              	.LVL8:
 137              	.LFB278:
  29:modules/motor/DMmotor/dmmotor.c ****     memset(motor->motor_can_instace->tx_buff, 0xff, 7);  // ÂèëÈÄÅÁîµÊú∫Êåá‰ª§ÁöÑÊó∂ÂÄôÂâçÈù¢7bytes
 138              		.loc 1 29 1 view -0
 139              		.cfi_startproc
 140              		@ args = 0, pretend = 0, frame = 0
 141              		@ frame_needed = 0, uses_anonymous_args = 0
  29:modules/motor/DMmotor/dmmotor.c ****     memset(motor->motor_can_instace->tx_buff, 0xff, 7);  // ÂèëÈÄÅÁîµÊú∫Êåá‰ª§ÁöÑÊó∂ÂÄôÂâçÈù¢7bytes
 142              		.loc 1 29 1 is_stmt 0 view .LVU31
 143 0000 08B5     		push	{r3, lr}
 144              	.LCFI0:
 145              		.cfi_def_cfa_offset 8
 146              		.cfi_offset 3, -8
 147              		.cfi_offset 14, -4
  30:modules/motor/DMmotor/dmmotor.c ****     motor->motor_can_instace->tx_buff[7] = (uint8_t)cmd; // ÊúÄÂêé‰∏Ä‰ΩçÊòØÂëΩ‰ª§id
 148              		.loc 1 30 5 is_stmt 1 view .LVU32
  30:modules/motor/DMmotor/dmmotor.c ****     motor->motor_can_instace->tx_buff[7] = (uint8_t)cmd; // ÊúÄÂêé‰∏Ä‰ΩçÊòØÂëΩ‰ª§id
 149              		.loc 1 30 17 is_stmt 0 view .LVU33
 150 0002 D1F8A831 		ldr	r3, [r1, #424]
  30:modules/motor/DMmotor/dmmotor.c ****     motor->motor_can_instace->tx_buff[7] = (uint8_t)cmd; // ÊúÄÂêé‰∏Ä‰ΩçÊòØÂëΩ‰ª§id
 151              		.loc 1 30 5 view .LVU34
 152 0006 4FF0FF32 		mov	r2, #-1
 153 000a 5A62     		str	r2, [r3, #36]	@ unaligned
 154 000c C3F82720 		str	r2, [r3, #39]	@ unaligned
  31:modules/motor/DMmotor/dmmotor.c ****     CANTransmit(motor->motor_can_instace, 1);
 155              		.loc 1 31 5 is_stmt 1 view .LVU35
  31:modules/motor/DMmotor/dmmotor.c ****     CANTransmit(motor->motor_can_instace, 1);
 156              		.loc 1 31 10 is_stmt 0 view .LVU36
 157 0010 D1F8A831 		ldr	r3, [r1, #424]
  31:modules/motor/DMmotor/dmmotor.c ****     CANTransmit(motor->motor_can_instace, 1);
 158              		.loc 1 31 42 view .LVU37
 159 0014 83F82B00 		strb	r0, [r3, #43]
  32:modules/motor/DMmotor/dmmotor.c **** }
 160              		.loc 1 32 5 is_stmt 1 view .LVU38
 161 0018 B7EE000A 		vmov.f32	s0, #1.0e+0
 162 001c D1F8A801 		ldr	r0, [r1, #424]
 163              	.LVL9:
  32:modules/motor/DMmotor/dmmotor.c **** }
 164              		.loc 1 32 5 is_stmt 0 view .LVU39
 165 0020 FFF7FEFF 		bl	CANTransmit
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 5


 166              	.LVL10:
  33:modules/motor/DMmotor/dmmotor.c **** 
 167              		.loc 1 33 1 view .LVU40
 168 0024 08BD     		pop	{r3, pc}
 169              		.cfi_endproc
 170              	.LFE278:
 172              		.section	.text.DMMotorDecode,"ax",%progbits
 173              		.align	1
 174              		.syntax unified
 175              		.thumb
 176              		.thumb_func
 178              	DMMotorDecode:
 179              	.LVL11:
 180              	.LFB279:
  36:modules/motor/DMmotor/dmmotor.c ****     uint16_t tmp; // Áî®‰∫éÊöÇÂ≠òËß£ÊûêÂÄº,Á®çÂêéËΩ¨Êç¢ÊàêfloatÊï∞ÊçÆ,ÈÅøÂÖçÂ§öÊ¨°ÂàõÂª∫‰∏¥Êó∂ÂèòÈá
 181              		.loc 1 36 1 is_stmt 1 view -0
 182              		.cfi_startproc
 183              		@ args = 0, pretend = 0, frame = 0
 184              		@ frame_needed = 0, uses_anonymous_args = 0
  36:modules/motor/DMmotor/dmmotor.c ****     uint16_t tmp; // Áî®‰∫éÊöÇÂ≠òËß£ÊûêÂÄº,Á®çÂêéËΩ¨Êç¢ÊàêfloatÊï∞ÊçÆ,ÈÅøÂÖçÂ§öÊ¨°ÂàõÂª∫‰∏¥Êó∂ÂèòÈá
 185              		.loc 1 36 1 is_stmt 0 view .LVU42
 186 0000 38B5     		push	{r3, r4, r5, lr}
 187              	.LCFI1:
 188              		.cfi_def_cfa_offset 16
 189              		.cfi_offset 3, -16
 190              		.cfi_offset 4, -12
 191              		.cfi_offset 5, -8
 192              		.cfi_offset 14, -4
 193 0002 0446     		mov	r4, r0
  37:modules/motor/DMmotor/dmmotor.c ****     uint8_t *rxbuff = motor_can->rx_buff;
 194              		.loc 1 37 5 is_stmt 1 view .LVU43
  38:modules/motor/DMmotor/dmmotor.c ****     DMMotorInstance *motor = (DMMotorInstance *)motor_can->id;
 195              		.loc 1 38 5 view .LVU44
 196              	.LVL12:
  39:modules/motor/DMmotor/dmmotor.c ****     DM_Motor_Measure_s *measure = &(motor->measure); // Â∞ÜcanÂÆû‰æã‰∏≠‰øùÂ≠òÁöÑidËΩ¨Êç¢ÊàêÁîµÊú∫ÂÆ
 197              		.loc 1 39 5 view .LVU45
  39:modules/motor/DMmotor/dmmotor.c ****     DM_Motor_Measure_s *measure = &(motor->measure); // Â∞ÜcanÂÆû‰æã‰∏≠‰øùÂ≠òÁöÑidËΩ¨Êç¢ÊàêÁîµÊú∫ÂÆ
 198              		.loc 1 39 22 is_stmt 0 view .LVU46
 199 0004 D0F84150 		ldr	r5, [r0, #65]	@ unaligned
 200              	.LVL13:
  40:modules/motor/DMmotor/dmmotor.c **** 
 201              		.loc 1 40 5 is_stmt 1 view .LVU47
  42:modules/motor/DMmotor/dmmotor.c **** 
 202              		.loc 1 42 5 view .LVU48
 203 0008 D5F8AC01 		ldr	r0, [r5, #428]
 204              	.LVL14:
  42:modules/motor/DMmotor/dmmotor.c **** 
 205              		.loc 1 42 5 is_stmt 0 view .LVU49
 206 000c FFF7FEFF 		bl	DaemonReload
 207              	.LVL15:
  44:modules/motor/DMmotor/dmmotor.c ****     tmp = (uint16_t)((rxbuff[1] << 8) | rxbuff[2]);
 208              		.loc 1 44 5 is_stmt 1 view .LVU50
  44:modules/motor/DMmotor/dmmotor.c ****     tmp = (uint16_t)((rxbuff[1] << 8) | rxbuff[2]);
 209              		.loc 1 44 37 is_stmt 0 view .LVU51
 210 0010 EB68     		ldr	r3, [r5, #12]	@ float
  44:modules/motor/DMmotor/dmmotor.c ****     tmp = (uint16_t)((rxbuff[1] << 8) | rxbuff[2]);
 211              		.loc 1 44 28 view .LVU52
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 6


 212 0012 AB60     		str	r3, [r5, #8]	@ float
  45:modules/motor/DMmotor/dmmotor.c ****     measure->position = uint_to_float(tmp, DM_P_MIN, DM_P_MAX, 16);
 213              		.loc 1 45 5 is_stmt 1 view .LVU53
  45:modules/motor/DMmotor/dmmotor.c ****     measure->position = uint_to_float(tmp, DM_P_MIN, DM_P_MAX, 16);
 214              		.loc 1 45 29 is_stmt 0 view .LVU54
 215 0014 94F82D00 		ldrb	r0, [r4, #45]	@ zero_extendqisi2
  45:modules/motor/DMmotor/dmmotor.c ****     measure->position = uint_to_float(tmp, DM_P_MIN, DM_P_MAX, 16);
 216              		.loc 1 45 47 view .LVU55
 217 0018 94F82E30 		ldrb	r3, [r4, #46]	@ zero_extendqisi2
 218              	.LVL16:
  46:modules/motor/DMmotor/dmmotor.c **** 
 219              		.loc 1 46 5 is_stmt 1 view .LVU56
  46:modules/motor/DMmotor/dmmotor.c **** 
 220              		.loc 1 46 25 is_stmt 0 view .LVU57
 221 001c 1021     		movs	r1, #16
 222 001e F2EE090A 		vmov.f32	s1, #1.25e+1
 223 0022 BAEE090A 		vmov.f32	s0, #-1.25e+1
 224 0026 43EA0020 		orr	r0, r3, r0, lsl #8
 225              	.LVL17:
  46:modules/motor/DMmotor/dmmotor.c **** 
 226              		.loc 1 46 25 view .LVU58
 227 002a FFF7FEFF 		bl	uint_to_float
 228              	.LVL18:
  46:modules/motor/DMmotor/dmmotor.c **** 
 229              		.loc 1 46 23 discriminator 1 view .LVU59
 230 002e 85ED030A 		vstr.32	s0, [r5, #12]
  48:modules/motor/DMmotor/dmmotor.c ****     measure->velocity = uint_to_float(tmp, DM_V_MIN, DM_V_MAX, 12);
 231              		.loc 1 48 5 is_stmt 1 view .LVU60
  48:modules/motor/DMmotor/dmmotor.c ****     measure->velocity = uint_to_float(tmp, DM_V_MIN, DM_V_MAX, 12);
 232              		.loc 1 48 29 is_stmt 0 view .LVU61
 233 0032 94F82F00 		ldrb	r0, [r4, #47]	@ zero_extendqisi2
  48:modules/motor/DMmotor/dmmotor.c ****     measure->velocity = uint_to_float(tmp, DM_V_MIN, DM_V_MAX, 12);
 234              		.loc 1 48 47 view .LVU62
 235 0036 94F83030 		ldrb	r3, [r4, #48]	@ zero_extendqisi2
  48:modules/motor/DMmotor/dmmotor.c ****     measure->velocity = uint_to_float(tmp, DM_V_MIN, DM_V_MAX, 12);
 236              		.loc 1 48 39 view .LVU63
 237 003a 1B09     		lsrs	r3, r3, #4
 238              	.LVL19:
  49:modules/motor/DMmotor/dmmotor.c **** 
 239              		.loc 1 49 5 is_stmt 1 view .LVU64
  49:modules/motor/DMmotor/dmmotor.c **** 
 240              		.loc 1 49 25 is_stmt 0 view .LVU65
 241 003c 0C21     		movs	r1, #12
 242 003e DFED160A 		vldr.32	s1, .L8
 243 0042 9FED160A 		vldr.32	s0, .L8+4
 244 0046 43EA0010 		orr	r0, r3, r0, lsl #4
 245              	.LVL20:
  49:modules/motor/DMmotor/dmmotor.c **** 
 246              		.loc 1 49 25 view .LVU66
 247 004a FFF7FEFF 		bl	uint_to_float
 248              	.LVL21:
  49:modules/motor/DMmotor/dmmotor.c **** 
 249              		.loc 1 49 23 discriminator 1 view .LVU67
 250 004e 85ED010A 		vstr.32	s0, [r5, #4]
  51:modules/motor/DMmotor/dmmotor.c ****     measure->torque = uint_to_float(tmp, DM_T_MIN, DM_T_MAX, 12);
 251              		.loc 1 51 5 is_stmt 1 view .LVU68
  51:modules/motor/DMmotor/dmmotor.c ****     measure->torque = uint_to_float(tmp, DM_T_MIN, DM_T_MAX, 12);
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 7


 252              		.loc 1 51 30 is_stmt 0 view .LVU69
 253 0052 94F83030 		ldrb	r3, [r4, #48]	@ zero_extendqisi2
  51:modules/motor/DMmotor/dmmotor.c ****     measure->torque = uint_to_float(tmp, DM_T_MIN, DM_T_MAX, 12);
 254              		.loc 1 51 56 view .LVU70
 255 0056 94F83100 		ldrb	r0, [r4, #49]	@ zero_extendqisi2
  51:modules/motor/DMmotor/dmmotor.c ****     measure->torque = uint_to_float(tmp, DM_T_MIN, DM_T_MAX, 12);
 256              		.loc 1 51 48 view .LVU71
 257 005a 1B02     		lsls	r3, r3, #8
 258 005c 03F47063 		and	r3, r3, #3840
 259              	.LVL22:
  52:modules/motor/DMmotor/dmmotor.c **** 
 260              		.loc 1 52 5 is_stmt 1 view .LVU72
  52:modules/motor/DMmotor/dmmotor.c **** 
 261              		.loc 1 52 23 is_stmt 0 view .LVU73
 262 0060 0C21     		movs	r1, #12
 263 0062 F3EE020A 		vmov.f32	s1, #1.8e+1
 264 0066 BBEE020A 		vmov.f32	s0, #-1.8e+1
 265 006a 1843     		orrs	r0, r0, r3
 266              	.LVL23:
  52:modules/motor/DMmotor/dmmotor.c **** 
 267              		.loc 1 52 23 view .LVU74
 268 006c FFF7FEFF 		bl	uint_to_float
 269              	.LVL24:
  52:modules/motor/DMmotor/dmmotor.c **** 
 270              		.loc 1 52 21 discriminator 1 view .LVU75
 271 0070 85ED040A 		vstr.32	s0, [r5, #16]
  54:modules/motor/DMmotor/dmmotor.c ****     measure->T_Rotor = (float)rxbuff[7];
 272              		.loc 1 54 5 is_stmt 1 view .LVU76
  54:modules/motor/DMmotor/dmmotor.c ****     measure->T_Rotor = (float)rxbuff[7];
 273              		.loc 1 54 35 is_stmt 0 view .LVU77
 274 0074 94F83230 		ldrb	r3, [r4, #50]	@ zero_extendqisi2
 275 0078 07EE903A 		vmov	s15, r3	@ int
  54:modules/motor/DMmotor/dmmotor.c ****     measure->T_Rotor = (float)rxbuff[7];
 276              		.loc 1 54 22 view .LVU78
 277 007c F8EE677A 		vcvt.f32.u32	s15, s15
  54:modules/motor/DMmotor/dmmotor.c ****     measure->T_Rotor = (float)rxbuff[7];
 278              		.loc 1 54 20 view .LVU79
 279 0080 C5ED057A 		vstr.32	s15, [r5, #20]
  55:modules/motor/DMmotor/dmmotor.c **** }
 280              		.loc 1 55 5 is_stmt 1 view .LVU80
  55:modules/motor/DMmotor/dmmotor.c **** }
 281              		.loc 1 55 37 is_stmt 0 view .LVU81
 282 0084 94F83330 		ldrb	r3, [r4, #51]	@ zero_extendqisi2
 283 0088 07EE903A 		vmov	s15, r3	@ int
  55:modules/motor/DMmotor/dmmotor.c **** }
 284              		.loc 1 55 24 view .LVU82
 285 008c F8EE677A 		vcvt.f32.u32	s15, s15
  55:modules/motor/DMmotor/dmmotor.c **** }
 286              		.loc 1 55 22 view .LVU83
 287 0090 C5ED067A 		vstr.32	s15, [r5, #24]
  56:modules/motor/DMmotor/dmmotor.c **** 
 288              		.loc 1 56 1 view .LVU84
 289 0094 38BD     		pop	{r3, r4, r5, pc}
 290              	.LVL25:
 291              	.L9:
  56:modules/motor/DMmotor/dmmotor.c **** 
 292              		.loc 1 56 1 view .LVU85
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 8


 293 0096 00BF     		.align	2
 294              	.L8:
 295 0098 00003442 		.word	1110704128
 296 009c 000034C2 		.word	-1036779520
 297              		.cfi_endproc
 298              	.LFE279:
 300              		.section	.text.DMMotorTask,"ax",%progbits
 301              		.align	1
 302              		.global	DMMotorTask
 303              		.syntax unified
 304              		.thumb
 305              		.thumb_func
 307              	DMMotorTask:
 308              	.LVL26:
 309              	.LFB287:
  61:modules/motor/DMmotor/dmmotor.c **** void DMMotorCaliEncoder(DMMotorInstance *motor)
  62:modules/motor/DMmotor/dmmotor.c **** {
  63:modules/motor/DMmotor/dmmotor.c ****     DMMotorSetMode(DM_CMD_ZERO_POSITION, motor);
  64:modules/motor/DMmotor/dmmotor.c ****     DWT_Delay(0.1);
  65:modules/motor/DMmotor/dmmotor.c **** }
  66:modules/motor/DMmotor/dmmotor.c **** DMMotorInstance *DMMotorInit(Motor_Init_Config_s *config)
  67:modules/motor/DMmotor/dmmotor.c **** {
  68:modules/motor/DMmotor/dmmotor.c ****     DMMotorInstance *motor = (DMMotorInstance *)malloc(sizeof(DMMotorInstance));
  69:modules/motor/DMmotor/dmmotor.c ****     memset(motor, 0, sizeof(DMMotorInstance));
  70:modules/motor/DMmotor/dmmotor.c ****     
  71:modules/motor/DMmotor/dmmotor.c ****     motor->motor_settings = config->controller_setting_init_config;
  72:modules/motor/DMmotor/dmmotor.c ****     PIDInit(&motor->current_PID, &config->controller_param_init_config.current_PID);
  73:modules/motor/DMmotor/dmmotor.c ****     PIDInit(&motor->speed_PID, &config->controller_param_init_config.speed_PID);
  74:modules/motor/DMmotor/dmmotor.c ****     PIDInit(&motor->angle_PID, &config->controller_param_init_config.angle_PID);
  75:modules/motor/DMmotor/dmmotor.c ****     motor->other_angle_feedback_ptr = config->controller_param_init_config.other_angle_feedback_ptr
  76:modules/motor/DMmotor/dmmotor.c ****     motor->other_speed_feedback_ptr = config->controller_param_init_config.other_speed_feedback_ptr
  77:modules/motor/DMmotor/dmmotor.c **** 
  78:modules/motor/DMmotor/dmmotor.c ****     config->can_init_config.can_module_callback = DMMotorDecode;
  79:modules/motor/DMmotor/dmmotor.c ****     config->can_init_config.id = motor;
  80:modules/motor/DMmotor/dmmotor.c ****     motor->motor_can_instace = CANRegister(&config->can_init_config);
  81:modules/motor/DMmotor/dmmotor.c **** 
  82:modules/motor/DMmotor/dmmotor.c ****     Daemon_Init_Config_s conf = {
  83:modules/motor/DMmotor/dmmotor.c ****         .callback = DMMotorLostCallback,
  84:modules/motor/DMmotor/dmmotor.c ****         .owner_id = motor,
  85:modules/motor/DMmotor/dmmotor.c ****         .reload_count = 10,
  86:modules/motor/DMmotor/dmmotor.c ****     };
  87:modules/motor/DMmotor/dmmotor.c ****     motor->motor_daemon = DaemonRegister(&conf);
  88:modules/motor/DMmotor/dmmotor.c **** 
  89:modules/motor/DMmotor/dmmotor.c ****     DMMotorEnable(motor);
  90:modules/motor/DMmotor/dmmotor.c ****     DMMotorSetMode(DM_CMD_MOTOR_MODE, motor);
  91:modules/motor/DMmotor/dmmotor.c ****     DWT_Delay(0.1);
  92:modules/motor/DMmotor/dmmotor.c ****     DMMotorCaliEncoder(motor);
  93:modules/motor/DMmotor/dmmotor.c ****     DWT_Delay(0.1);
  94:modules/motor/DMmotor/dmmotor.c ****     dm_motor_instance[idx++] = motor;
  95:modules/motor/DMmotor/dmmotor.c ****     return motor;
  96:modules/motor/DMmotor/dmmotor.c **** }
  97:modules/motor/DMmotor/dmmotor.c **** 
  98:modules/motor/DMmotor/dmmotor.c **** void DMMotorSetRef(DMMotorInstance *motor, float ref)
  99:modules/motor/DMmotor/dmmotor.c **** {
 100:modules/motor/DMmotor/dmmotor.c ****     motor->pid_ref = ref;
 101:modules/motor/DMmotor/dmmotor.c **** }
 102:modules/motor/DMmotor/dmmotor.c **** 
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 9


 103:modules/motor/DMmotor/dmmotor.c **** void DMMotorEnable(DMMotorInstance *motor)
 104:modules/motor/DMmotor/dmmotor.c **** {
 105:modules/motor/DMmotor/dmmotor.c ****     motor->stop_flag = MOTOR_ENALBED;
 106:modules/motor/DMmotor/dmmotor.c **** }
 107:modules/motor/DMmotor/dmmotor.c **** 
 108:modules/motor/DMmotor/dmmotor.c **** void DMMotorStop(DMMotorInstance *motor)//‰∏ç‰ΩøÁî®‰ΩøËÉΩÊ®°ÂºèÊòØÂõ†‰∏∫ÈúÄË¶ÅÊî∂Âà∞ÂèçÈ¶à
 109:modules/motor/DMmotor/dmmotor.c **** {
 110:modules/motor/DMmotor/dmmotor.c ****     motor->stop_flag = MOTOR_STOP;
 111:modules/motor/DMmotor/dmmotor.c **** }
 112:modules/motor/DMmotor/dmmotor.c **** 
 113:modules/motor/DMmotor/dmmotor.c **** void DMMotorOuterLoop(DMMotorInstance *motor, Closeloop_Type_e type)
 114:modules/motor/DMmotor/dmmotor.c **** {
 115:modules/motor/DMmotor/dmmotor.c ****     motor->motor_settings.outer_loop_type = type;
 116:modules/motor/DMmotor/dmmotor.c **** }
 117:modules/motor/DMmotor/dmmotor.c **** 
 118:modules/motor/DMmotor/dmmotor.c **** 
 119:modules/motor/DMmotor/dmmotor.c **** //@Todo: ÁõÆÂâçÂè™ÂÆûÁé∞‰∫ÜÂäõÊéßÔºåÊõ¥Â§ö‰ΩçÊéßPIDÁ≠âËØ∑Ëá™Ë°åÊ∑ªÂä†
 120:modules/motor/DMmotor/dmmotor.c **** void DMMotorTask(void const *argument)
 121:modules/motor/DMmotor/dmmotor.c **** {
 310              		.loc 1 121 1 is_stmt 1 view -0
 311              		.cfi_startproc
 312              		@ args = 0, pretend = 0, frame = 16
 313              		@ frame_needed = 0, uses_anonymous_args = 0
 314              		.loc 1 121 1 is_stmt 0 view .LVU87
 315 0000 70B5     		push	{r4, r5, r6, lr}
 316              	.LCFI2:
 317              		.cfi_def_cfa_offset 16
 318              		.cfi_offset 4, -16
 319              		.cfi_offset 5, -12
 320              		.cfi_offset 6, -8
 321              		.cfi_offset 14, -4
 322 0002 2DED028B 		vpush.64	{d8}
 323              	.LCFI3:
 324              		.cfi_def_cfa_offset 24
 325              		.cfi_offset 80, -24
 326              		.cfi_offset 81, -20
 327 0006 84B0     		sub	sp, sp, #16
 328              	.LCFI4:
 329              		.cfi_def_cfa_offset 40
 330 0008 0446     		mov	r4, r0
 122:modules/motor/DMmotor/dmmotor.c ****     float  pid_ref, set;
 331              		.loc 1 122 5 is_stmt 1 view .LVU88
 123:modules/motor/DMmotor/dmmotor.c ****     DMMotorInstance *motor = (DMMotorInstance *)argument;
 332              		.loc 1 123 5 view .LVU89
 333              	.LVL27:
 124:modules/motor/DMmotor/dmmotor.c ****    //DM_Motor_Measure_s *measure = &motor->measure;
 125:modules/motor/DMmotor/dmmotor.c ****     Motor_Control_Setting_s *setting = &motor->motor_settings;
 334              		.loc 1 125 5 view .LVU90
 335              		.loc 1 125 5 is_stmt 0 view .LVU91
 336 000a 3BE0     		b	.L12
 337              	.LVL28:
 338              	.L14:
 126:modules/motor/DMmotor/dmmotor.c ****     //CANInstance *motor_can = motor->motor_can_instace;
 127:modules/motor/DMmotor/dmmotor.c ****     //uint16_t tmp;
 128:modules/motor/DMmotor/dmmotor.c ****     DMMotor_Send_s motor_send_mailbox;
 129:modules/motor/DMmotor/dmmotor.c ****     while (1)
 130:modules/motor/DMmotor/dmmotor.c ****     {
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 10


 131:modules/motor/DMmotor/dmmotor.c ****         pid_ref = motor->pid_ref;
 132:modules/motor/DMmotor/dmmotor.c ****         
 133:modules/motor/DMmotor/dmmotor.c ****         set = pid_ref;
 134:modules/motor/DMmotor/dmmotor.c ****         if (setting->motor_reverse_flag == MOTOR_DIRECTION_REVERSE)
 135:modules/motor/DMmotor/dmmotor.c ****             set *= -1;
 136:modules/motor/DMmotor/dmmotor.c ****        
 137:modules/motor/DMmotor/dmmotor.c ****         LIMIT_MIN_MAX(set, DM_T_MIN, DM_T_MAX);
 138:modules/motor/DMmotor/dmmotor.c ****         motor_send_mailbox.position_des = float_to_uint(0, DM_P_MIN, DM_P_MAX, 16);
 139:modules/motor/DMmotor/dmmotor.c ****         motor_send_mailbox.velocity_des = float_to_uint(0, DM_V_MIN, DM_V_MAX, 12);
 140:modules/motor/DMmotor/dmmotor.c ****         motor_send_mailbox.torque_des = float_to_uint(pid_ref, DM_T_MIN, DM_T_MAX, 12);
 141:modules/motor/DMmotor/dmmotor.c ****         motor_send_mailbox.Kp = 0;
 142:modules/motor/DMmotor/dmmotor.c ****         motor_send_mailbox.Kd = 0;
 143:modules/motor/DMmotor/dmmotor.c **** 
 144:modules/motor/DMmotor/dmmotor.c ****         if(motor->stop_flag == MOTOR_STOP)
 145:modules/motor/DMmotor/dmmotor.c ****             motor_send_mailbox.torque_des = float_to_uint(0, DM_T_MIN, DM_T_MAX, 12);
 339              		.loc 1 145 13 is_stmt 1 view .LVU92
 340              		.loc 1 145 45 is_stmt 0 view .LVU93
 341 000c 0C20     		movs	r0, #12
 342 000e B3EE021A 		vmov.f32	s2, #1.8e+1
 343 0012 FBEE020A 		vmov.f32	s1, #-1.8e+1
 344 0016 B0EE480A 		vmov.f32	s0, s16
 345 001a FFF7FEFF 		bl	float_to_uint
 346              	.LVL29:
 347              		.loc 1 145 43 discriminator 1 view .LVU94
 348 001e ADF80800 		strh	r0, [sp, #8]	@ movhi
 349              	.L11:
 146:modules/motor/DMmotor/dmmotor.c **** 
 147:modules/motor/DMmotor/dmmotor.c ****         motor->motor_can_instace->tx_buff[0] = (uint8_t)(motor_send_mailbox.position_des >> 8);
 350              		.loc 1 147 9 is_stmt 1 view .LVU95
 351              		.loc 1 147 14 is_stmt 0 view .LVU96
 352 0022 D4F8A831 		ldr	r3, [r4, #424]
 353              		.loc 1 147 48 view .LVU97
 354 0026 320A     		lsrs	r2, r6, #8
 355              		.loc 1 147 46 view .LVU98
 356 0028 83F82420 		strb	r2, [r3, #36]
 148:modules/motor/DMmotor/dmmotor.c ****         motor->motor_can_instace->tx_buff[1] = (uint8_t)(motor_send_mailbox.position_des);
 357              		.loc 1 148 9 is_stmt 1 view .LVU99
 358              		.loc 1 148 14 is_stmt 0 view .LVU100
 359 002c D4F8A831 		ldr	r3, [r4, #424]
 360              		.loc 1 148 46 view .LVU101
 361 0030 83F82560 		strb	r6, [r3, #37]
 149:modules/motor/DMmotor/dmmotor.c ****         motor->motor_can_instace->tx_buff[2] = (uint8_t)(motor_send_mailbox.velocity_des >> 4);
 362              		.loc 1 149 9 is_stmt 1 view .LVU102
 363              		.loc 1 149 14 is_stmt 0 view .LVU103
 364 0034 D4F8A831 		ldr	r3, [r4, #424]
 365              		.loc 1 149 48 view .LVU104
 366 0038 C5F30712 		ubfx	r2, r5, #4, #8
 367              		.loc 1 149 46 view .LVU105
 368 003c 83F82620 		strb	r2, [r3, #38]
 150:modules/motor/DMmotor/dmmotor.c ****         motor->motor_can_instace->tx_buff[3] = (uint8_t)(((motor_send_mailbox.velocity_des & 0xF) <
 369              		.loc 1 150 9 is_stmt 1 view .LVU106
 370              		.loc 1 150 105 is_stmt 0 view .LVU107
 371 0040 2D01     		lsls	r5, r5, #4
 372              		.loc 1 150 14 view .LVU108
 373 0042 D4F8A831 		ldr	r3, [r4, #424]
 374              		.loc 1 150 46 view .LVU109
 375 0046 83F82750 		strb	r5, [r3, #39]
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 11


 151:modules/motor/DMmotor/dmmotor.c ****         motor->motor_can_instace->tx_buff[4] = (uint8_t)(motor_send_mailbox.Kp);
 376              		.loc 1 151 9 is_stmt 1 view .LVU110
 377              		.loc 1 151 14 is_stmt 0 view .LVU111
 378 004a D4F8A821 		ldr	r2, [r4, #424]
 379              		.loc 1 151 46 view .LVU112
 380 004e 0023     		movs	r3, #0
 381 0050 82F82830 		strb	r3, [r2, #40]
 152:modules/motor/DMmotor/dmmotor.c ****         motor->motor_can_instace->tx_buff[5] = (uint8_t)(motor_send_mailbox.Kd >> 4);
 382              		.loc 1 152 9 is_stmt 1 view .LVU113
 383              		.loc 1 152 14 is_stmt 0 view .LVU114
 384 0054 D4F8A821 		ldr	r2, [r4, #424]
 385              		.loc 1 152 46 view .LVU115
 386 0058 82F82930 		strb	r3, [r2, #41]
 153:modules/motor/DMmotor/dmmotor.c ****         motor->motor_can_instace->tx_buff[6] = (uint8_t)(((motor_send_mailbox.Kd & 0xF) << 4) | (mo
 387              		.loc 1 153 9 is_stmt 1 view .LVU116
 388              		.loc 1 153 116 is_stmt 0 view .LVU117
 389 005c BDF80830 		ldrh	r3, [sp, #8]
 390              		.loc 1 153 14 view .LVU118
 391 0060 D4F8A821 		ldr	r2, [r4, #424]
 392              		.loc 1 153 48 view .LVU119
 393 0064 190A     		lsrs	r1, r3, #8
 394              		.loc 1 153 46 view .LVU120
 395 0066 82F82A10 		strb	r1, [r2, #42]
 154:modules/motor/DMmotor/dmmotor.c ****         motor->motor_can_instace->tx_buff[7] = (uint8_t)(motor_send_mailbox.torque_des);
 396              		.loc 1 154 9 is_stmt 1 view .LVU121
 397              		.loc 1 154 14 is_stmt 0 view .LVU122
 398 006a D4F8A821 		ldr	r2, [r4, #424]
 399              		.loc 1 154 46 view .LVU123
 400 006e 82F82B30 		strb	r3, [r2, #43]
 155:modules/motor/DMmotor/dmmotor.c **** 
 156:modules/motor/DMmotor/dmmotor.c ****         CANTransmit(motor->motor_can_instace, 1);
 401              		.loc 1 156 9 is_stmt 1 view .LVU124
 402 0072 B7EE000A 		vmov.f32	s0, #1.0e+0
 403 0076 D4F8A801 		ldr	r0, [r4, #424]
 404 007a FFF7FEFF 		bl	CANTransmit
 405              	.LVL30:
 157:modules/motor/DMmotor/dmmotor.c **** 
 158:modules/motor/DMmotor/dmmotor.c ****         osDelay(2);
 406              		.loc 1 158 9 view .LVU125
 407 007e 0220     		movs	r0, #2
 408 0080 FFF7FEFF 		bl	osDelay
 409              	.LVL31:
 129:modules/motor/DMmotor/dmmotor.c ****     {
 410              		.loc 1 129 11 view .LVU126
 411              	.L12:
 128:modules/motor/DMmotor/dmmotor.c ****     while (1)
 412              		.loc 1 128 5 view .LVU127
 129:modules/motor/DMmotor/dmmotor.c ****     {
 413              		.loc 1 129 5 view .LVU128
 131:modules/motor/DMmotor/dmmotor.c ****         
 414              		.loc 1 131 9 view .LVU129
 131:modules/motor/DMmotor/dmmotor.c ****         
 415              		.loc 1 131 17 is_stmt 0 view .LVU130
 416 0084 D4ED688A 		vldr.32	s17, [r4, #416]
 417              	.LVL32:
 133:modules/motor/DMmotor/dmmotor.c ****         if (setting->motor_reverse_flag == MOTOR_DIRECTION_REVERSE)
 418              		.loc 1 133 9 is_stmt 1 view .LVU131
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 12


 134:modules/motor/DMmotor/dmmotor.c ****             set *= -1;
 419              		.loc 1 134 9 view .LVU132
 135:modules/motor/DMmotor/dmmotor.c ****        
 420              		.loc 1 135 13 view .LVU133
 137:modules/motor/DMmotor/dmmotor.c ****         motor_send_mailbox.position_des = float_to_uint(0, DM_P_MIN, DM_P_MAX, 16);
 421              		.loc 1 137 9 view .LVU134
 138:modules/motor/DMmotor/dmmotor.c ****         motor_send_mailbox.velocity_des = float_to_uint(0, DM_V_MIN, DM_V_MAX, 12);
 422              		.loc 1 138 9 view .LVU135
 138:modules/motor/DMmotor/dmmotor.c ****         motor_send_mailbox.velocity_des = float_to_uint(0, DM_V_MIN, DM_V_MAX, 12);
 423              		.loc 1 138 43 is_stmt 0 view .LVU136
 424 0088 9FED178A 		vldr.32	s16, .L15
 425 008c 1020     		movs	r0, #16
 426 008e B2EE091A 		vmov.f32	s2, #1.25e+1
 427 0092 FAEE090A 		vmov.f32	s1, #-1.25e+1
 428 0096 B0EE480A 		vmov.f32	s0, s16
 429 009a FFF7FEFF 		bl	float_to_uint
 430              	.LVL33:
 431 009e 0646     		mov	r6, r0
 138:modules/motor/DMmotor/dmmotor.c ****         motor_send_mailbox.velocity_des = float_to_uint(0, DM_V_MIN, DM_V_MAX, 12);
 432              		.loc 1 138 41 discriminator 1 view .LVU137
 433 00a0 ADF80400 		strh	r0, [sp, #4]	@ movhi
 139:modules/motor/DMmotor/dmmotor.c ****         motor_send_mailbox.torque_des = float_to_uint(pid_ref, DM_T_MIN, DM_T_MAX, 12);
 434              		.loc 1 139 9 is_stmt 1 view .LVU138
 139:modules/motor/DMmotor/dmmotor.c ****         motor_send_mailbox.torque_des = float_to_uint(pid_ref, DM_T_MIN, DM_T_MAX, 12);
 435              		.loc 1 139 43 is_stmt 0 view .LVU139
 436 00a4 0C20     		movs	r0, #12
 437 00a6 9FED111A 		vldr.32	s2, .L15+4
 438 00aa DFED110A 		vldr.32	s1, .L15+8
 439 00ae B0EE480A 		vmov.f32	s0, s16
 440 00b2 FFF7FEFF 		bl	float_to_uint
 441              	.LVL34:
 442 00b6 0546     		mov	r5, r0
 139:modules/motor/DMmotor/dmmotor.c ****         motor_send_mailbox.torque_des = float_to_uint(pid_ref, DM_T_MIN, DM_T_MAX, 12);
 443              		.loc 1 139 41 discriminator 1 view .LVU140
 444 00b8 ADF80600 		strh	r0, [sp, #6]	@ movhi
 140:modules/motor/DMmotor/dmmotor.c ****         motor_send_mailbox.Kp = 0;
 445              		.loc 1 140 9 is_stmt 1 view .LVU141
 140:modules/motor/DMmotor/dmmotor.c ****         motor_send_mailbox.Kp = 0;
 446              		.loc 1 140 41 is_stmt 0 view .LVU142
 447 00bc 0C20     		movs	r0, #12
 448 00be B3EE021A 		vmov.f32	s2, #1.8e+1
 449 00c2 FBEE020A 		vmov.f32	s1, #-1.8e+1
 450 00c6 B0EE680A 		vmov.f32	s0, s17
 451 00ca FFF7FEFF 		bl	float_to_uint
 452              	.LVL35:
 140:modules/motor/DMmotor/dmmotor.c ****         motor_send_mailbox.Kp = 0;
 453              		.loc 1 140 39 discriminator 1 view .LVU143
 454 00ce ADF80800 		strh	r0, [sp, #8]	@ movhi
 141:modules/motor/DMmotor/dmmotor.c ****         motor_send_mailbox.Kd = 0;
 455              		.loc 1 141 9 is_stmt 1 view .LVU144
 141:modules/motor/DMmotor/dmmotor.c ****         motor_send_mailbox.Kd = 0;
 456              		.loc 1 141 31 is_stmt 0 view .LVU145
 457 00d2 0023     		movs	r3, #0
 458 00d4 ADF80A30 		strh	r3, [sp, #10]	@ movhi
 142:modules/motor/DMmotor/dmmotor.c **** 
 459              		.loc 1 142 9 is_stmt 1 view .LVU146
 142:modules/motor/DMmotor/dmmotor.c **** 
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 13


 460              		.loc 1 142 31 is_stmt 0 view .LVU147
 461 00d8 ADF80C30 		strh	r3, [sp, #12]	@ movhi
 144:modules/motor/DMmotor/dmmotor.c ****             motor_send_mailbox.torque_des = float_to_uint(0, DM_T_MIN, DM_T_MAX, 12);
 462              		.loc 1 144 9 is_stmt 1 view .LVU148
 144:modules/motor/DMmotor/dmmotor.c ****             motor_send_mailbox.torque_des = float_to_uint(0, DM_T_MIN, DM_T_MAX, 12);
 463              		.loc 1 144 17 is_stmt 0 view .LVU149
 464 00dc 94F8A431 		ldrb	r3, [r4, #420]	@ zero_extendqisi2
 144:modules/motor/DMmotor/dmmotor.c ****             motor_send_mailbox.torque_des = float_to_uint(0, DM_T_MIN, DM_T_MAX, 12);
 465              		.loc 1 144 11 view .LVU150
 466 00e0 002B     		cmp	r3, #0
 467 00e2 93D0     		beq	.L14
 468 00e4 9DE7     		b	.L11
 469              	.L16:
 470 00e6 00BF     		.align	2
 471              	.L15:
 472 00e8 00000000 		.word	0
 473 00ec 00003442 		.word	1110704128
 474 00f0 000034C2 		.word	-1036779520
 475              		.cfi_endproc
 476              	.LFE287:
 478              		.section	.text.DMMotorCaliEncoder,"ax",%progbits
 479              		.align	1
 480              		.global	DMMotorCaliEncoder
 481              		.syntax unified
 482              		.thumb
 483              		.thumb_func
 485              	DMMotorCaliEncoder:
 486              	.LVL36:
 487              	.LFB281:
  62:modules/motor/DMmotor/dmmotor.c ****     DMMotorSetMode(DM_CMD_ZERO_POSITION, motor);
 488              		.loc 1 62 1 is_stmt 1 view -0
 489              		.cfi_startproc
 490              		@ args = 0, pretend = 0, frame = 0
 491              		@ frame_needed = 0, uses_anonymous_args = 0
  62:modules/motor/DMmotor/dmmotor.c ****     DMMotorSetMode(DM_CMD_ZERO_POSITION, motor);
 492              		.loc 1 62 1 is_stmt 0 view .LVU152
 493 0000 08B5     		push	{r3, lr}
 494              	.LCFI5:
 495              		.cfi_def_cfa_offset 8
 496              		.cfi_offset 3, -8
 497              		.cfi_offset 14, -4
 498 0002 0146     		mov	r1, r0
  63:modules/motor/DMmotor/dmmotor.c ****     DWT_Delay(0.1);
 499              		.loc 1 63 5 is_stmt 1 view .LVU153
 500 0004 FE20     		movs	r0, #254
 501              	.LVL37:
  63:modules/motor/DMmotor/dmmotor.c ****     DWT_Delay(0.1);
 502              		.loc 1 63 5 is_stmt 0 view .LVU154
 503 0006 FFF7FEFF 		bl	DMMotorSetMode
 504              	.LVL38:
  64:modules/motor/DMmotor/dmmotor.c **** }
 505              		.loc 1 64 5 is_stmt 1 view .LVU155
 506 000a 9FED020A 		vldr.32	s0, .L19
 507 000e FFF7FEFF 		bl	DWT_Delay
 508              	.LVL39:
  65:modules/motor/DMmotor/dmmotor.c **** DMMotorInstance *DMMotorInit(Motor_Init_Config_s *config)
 509              		.loc 1 65 1 is_stmt 0 view .LVU156
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 14


 510 0012 08BD     		pop	{r3, pc}
 511              	.L20:
 512              		.align	2
 513              	.L19:
 514 0014 CDCCCC3D 		.word	1036831949
 515              		.cfi_endproc
 516              	.LFE281:
 518              		.section	.text.DMMotorSetRef,"ax",%progbits
 519              		.align	1
 520              		.global	DMMotorSetRef
 521              		.syntax unified
 522              		.thumb
 523              		.thumb_func
 525              	DMMotorSetRef:
 526              	.LVL40:
 527              	.LFB283:
  99:modules/motor/DMmotor/dmmotor.c ****     motor->pid_ref = ref;
 528              		.loc 1 99 1 is_stmt 1 view -0
 529              		.cfi_startproc
 530              		@ args = 0, pretend = 0, frame = 0
 531              		@ frame_needed = 0, uses_anonymous_args = 0
 532              		@ link register save eliminated.
 100:modules/motor/DMmotor/dmmotor.c **** }
 533              		.loc 1 100 5 view .LVU158
 100:modules/motor/DMmotor/dmmotor.c **** }
 534              		.loc 1 100 20 is_stmt 0 view .LVU159
 535 0000 80ED680A 		vstr.32	s0, [r0, #416]
 101:modules/motor/DMmotor/dmmotor.c **** 
 536              		.loc 1 101 1 view .LVU160
 537 0004 7047     		bx	lr
 538              		.cfi_endproc
 539              	.LFE283:
 541              		.section	.text.DMMotorEnable,"ax",%progbits
 542              		.align	1
 543              		.global	DMMotorEnable
 544              		.syntax unified
 545              		.thumb
 546              		.thumb_func
 548              	DMMotorEnable:
 549              	.LVL41:
 550              	.LFB284:
 104:modules/motor/DMmotor/dmmotor.c ****     motor->stop_flag = MOTOR_ENALBED;
 551              		.loc 1 104 1 is_stmt 1 view -0
 552              		.cfi_startproc
 553              		@ args = 0, pretend = 0, frame = 0
 554              		@ frame_needed = 0, uses_anonymous_args = 0
 555              		@ link register save eliminated.
 105:modules/motor/DMmotor/dmmotor.c **** }
 556              		.loc 1 105 5 view .LVU162
 105:modules/motor/DMmotor/dmmotor.c **** }
 557              		.loc 1 105 22 is_stmt 0 view .LVU163
 558 0000 0123     		movs	r3, #1
 559 0002 80F8A431 		strb	r3, [r0, #420]
 106:modules/motor/DMmotor/dmmotor.c **** 
 560              		.loc 1 106 1 view .LVU164
 561 0006 7047     		bx	lr
 562              		.cfi_endproc
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 15


 563              	.LFE284:
 565              		.section	.text.DMMotorInit,"ax",%progbits
 566              		.align	1
 567              		.global	DMMotorInit
 568              		.syntax unified
 569              		.thumb
 570              		.thumb_func
 572              	DMMotorInit:
 573              	.LVL42:
 574              	.LFB282:
  67:modules/motor/DMmotor/dmmotor.c ****     DMMotorInstance *motor = (DMMotorInstance *)malloc(sizeof(DMMotorInstance));
 575              		.loc 1 67 1 is_stmt 1 view -0
 576              		.cfi_startproc
 577              		@ args = 0, pretend = 0, frame = 16
 578              		@ frame_needed = 0, uses_anonymous_args = 0
  67:modules/motor/DMmotor/dmmotor.c ****     DMMotorInstance *motor = (DMMotorInstance *)malloc(sizeof(DMMotorInstance));
 579              		.loc 1 67 1 is_stmt 0 view .LVU166
 580 0000 30B5     		push	{r4, r5, lr}
 581              	.LCFI6:
 582              		.cfi_def_cfa_offset 12
 583              		.cfi_offset 4, -12
 584              		.cfi_offset 5, -8
 585              		.cfi_offset 14, -4
 586 0002 2DED028B 		vpush.64	{d8}
 587              	.LCFI7:
 588              		.cfi_def_cfa_offset 20
 589              		.cfi_offset 80, -20
 590              		.cfi_offset 81, -16
 591 0006 85B0     		sub	sp, sp, #20
 592              	.LCFI8:
 593              		.cfi_def_cfa_offset 40
 594 0008 0546     		mov	r5, r0
  68:modules/motor/DMmotor/dmmotor.c ****     memset(motor, 0, sizeof(DMMotorInstance));
 595              		.loc 1 68 5 is_stmt 1 view .LVU167
  68:modules/motor/DMmotor/dmmotor.c ****     memset(motor, 0, sizeof(DMMotorInstance));
 596              		.loc 1 68 49 is_stmt 0 view .LVU168
 597 000a 4FF4DC70 		mov	r0, #440
 598              	.LVL43:
  68:modules/motor/DMmotor/dmmotor.c ****     memset(motor, 0, sizeof(DMMotorInstance));
 599              		.loc 1 68 49 view .LVU169
 600 000e FFF7FEFF 		bl	malloc
 601              	.LVL44:
 602 0012 0446     		mov	r4, r0
 603              	.LVL45:
  69:modules/motor/DMmotor/dmmotor.c ****     
 604              		.loc 1 69 5 is_stmt 1 view .LVU170
 605 0014 4FF4DC72 		mov	r2, #440
 606 0018 0021     		movs	r1, #0
 607 001a FFF7FEFF 		bl	memset
 608              	.LVL46:
  71:modules/motor/DMmotor/dmmotor.c ****     PIDInit(&motor->current_PID, &config->controller_param_init_config.current_PID);
 609              		.loc 1 71 5 view .LVU171
  71:modules/motor/DMmotor/dmmotor.c ****     PIDInit(&motor->current_PID, &config->controller_param_init_config.current_PID);
 610              		.loc 1 71 27 is_stmt 0 view .LVU172
 611 001e 04F12003 		add	r3, r4, #32
 612 0022 05F19402 		add	r2, r5, #148
 613 0026 92E80300 		ldm	r2, {r0, r1}
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 16


 614 002a 83E80300 		stm	r3, {r0, r1}
  72:modules/motor/DMmotor/dmmotor.c ****     PIDInit(&motor->speed_PID, &config->controller_param_init_config.speed_PID);
 615              		.loc 1 72 5 is_stmt 1 view .LVU173
 616 002e 05F11001 		add	r1, r5, #16
 617 0032 04F12800 		add	r0, r4, #40
 618 0036 FFF7FEFF 		bl	PIDInit
 619              	.LVL47:
  73:modules/motor/DMmotor/dmmotor.c ****     PIDInit(&motor->angle_PID, &config->controller_param_init_config.angle_PID);
 620              		.loc 1 73 5 view .LVU174
 621 003a 05F13C01 		add	r1, r5, #60
 622 003e 04F1A000 		add	r0, r4, #160
 623 0042 FFF7FEFF 		bl	PIDInit
 624              	.LVL48:
  74:modules/motor/DMmotor/dmmotor.c ****     motor->other_angle_feedback_ptr = config->controller_param_init_config.other_angle_feedback_ptr
 625              		.loc 1 74 5 view .LVU175
 626 0046 05F16801 		add	r1, r5, #104
 627 004a 04F58C70 		add	r0, r4, #280
 628 004e FFF7FEFF 		bl	PIDInit
 629              	.LVL49:
  75:modules/motor/DMmotor/dmmotor.c ****     motor->other_speed_feedback_ptr = config->controller_param_init_config.other_speed_feedback_ptr
 630              		.loc 1 75 5 view .LVU176
  75:modules/motor/DMmotor/dmmotor.c ****     motor->other_speed_feedback_ptr = config->controller_param_init_config.other_speed_feedback_ptr
 631              		.loc 1 75 75 is_stmt 0 view .LVU177
 632 0052 2B68     		ldr	r3, [r5]
  75:modules/motor/DMmotor/dmmotor.c ****     motor->other_speed_feedback_ptr = config->controller_param_init_config.other_speed_feedback_ptr
 633              		.loc 1 75 37 view .LVU178
 634 0054 C4F89031 		str	r3, [r4, #400]
  76:modules/motor/DMmotor/dmmotor.c **** 
 635              		.loc 1 76 5 is_stmt 1 view .LVU179
  76:modules/motor/DMmotor/dmmotor.c **** 
 636              		.loc 1 76 75 is_stmt 0 view .LVU180
 637 0058 6B68     		ldr	r3, [r5, #4]
  76:modules/motor/DMmotor/dmmotor.c **** 
 638              		.loc 1 76 37 view .LVU181
 639 005a C4F89431 		str	r3, [r4, #404]
  78:modules/motor/DMmotor/dmmotor.c ****     config->can_init_config.id = motor;
 640              		.loc 1 78 5 is_stmt 1 view .LVU182
  78:modules/motor/DMmotor/dmmotor.c ****     config->can_init_config.id = motor;
 641              		.loc 1 78 49 is_stmt 0 view .LVU183
 642 005e 1D4B     		ldr	r3, .L25
 643 0060 C5F8B430 		str	r3, [r5, #180]
  79:modules/motor/DMmotor/dmmotor.c ****     motor->motor_can_instace = CANRegister(&config->can_init_config);
 644              		.loc 1 79 5 is_stmt 1 view .LVU184
  79:modules/motor/DMmotor/dmmotor.c ****     motor->motor_can_instace = CANRegister(&config->can_init_config);
 645              		.loc 1 79 32 is_stmt 0 view .LVU185
 646 0064 C5F8B840 		str	r4, [r5, #184]
  80:modules/motor/DMmotor/dmmotor.c **** 
 647              		.loc 1 80 5 is_stmt 1 view .LVU186
  80:modules/motor/DMmotor/dmmotor.c **** 
 648              		.loc 1 80 32 is_stmt 0 view .LVU187
 649 0068 05F1A000 		add	r0, r5, #160
 650 006c FFF7FEFF 		bl	CANRegister
 651              	.LVL50:
  80:modules/motor/DMmotor/dmmotor.c **** 
 652              		.loc 1 80 30 discriminator 1 view .LVU188
 653 0070 C4F8A801 		str	r0, [r4, #424]
  82:modules/motor/DMmotor/dmmotor.c ****         .callback = DMMotorLostCallback,
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 17


 654              		.loc 1 82 5 is_stmt 1 view .LVU189
  82:modules/motor/DMmotor/dmmotor.c ****         .callback = DMMotorLostCallback,
 655              		.loc 1 82 26 is_stmt 0 view .LVU190
 656 0074 0023     		movs	r3, #0
 657 0076 0193     		str	r3, [sp, #4]
 658 0078 0293     		str	r3, [sp, #8]
 659 007a 0393     		str	r3, [sp, #12]
 660 007c 0A23     		movs	r3, #10
 661 007e ADF80430 		strh	r3, [sp, #4]	@ movhi
 662 0082 154B     		ldr	r3, .L25+4
 663 0084 0293     		str	r3, [sp, #8]
 664 0086 0394     		str	r4, [sp, #12]
  87:modules/motor/DMmotor/dmmotor.c **** 
 665              		.loc 1 87 5 is_stmt 1 view .LVU191
  87:modules/motor/DMmotor/dmmotor.c **** 
 666              		.loc 1 87 27 is_stmt 0 view .LVU192
 667 0088 01A8     		add	r0, sp, #4
 668 008a FFF7FEFF 		bl	DaemonRegister
 669              	.LVL51:
  87:modules/motor/DMmotor/dmmotor.c **** 
 670              		.loc 1 87 25 discriminator 1 view .LVU193
 671 008e C4F8AC01 		str	r0, [r4, #428]
  89:modules/motor/DMmotor/dmmotor.c ****     DMMotorSetMode(DM_CMD_MOTOR_MODE, motor);
 672              		.loc 1 89 5 is_stmt 1 view .LVU194
 673 0092 2046     		mov	r0, r4
 674 0094 FFF7FEFF 		bl	DMMotorEnable
 675              	.LVL52:
  90:modules/motor/DMmotor/dmmotor.c ****     DWT_Delay(0.1);
 676              		.loc 1 90 5 view .LVU195
 677 0098 2146     		mov	r1, r4
 678 009a FC20     		movs	r0, #252
 679 009c FFF7FEFF 		bl	DMMotorSetMode
 680              	.LVL53:
  91:modules/motor/DMmotor/dmmotor.c ****     DMMotorCaliEncoder(motor);
 681              		.loc 1 91 5 view .LVU196
 682 00a0 9FED0E8A 		vldr.32	s16, .L25+8
 683 00a4 B0EE480A 		vmov.f32	s0, s16
 684 00a8 FFF7FEFF 		bl	DWT_Delay
 685              	.LVL54:
  92:modules/motor/DMmotor/dmmotor.c ****     DWT_Delay(0.1);
 686              		.loc 1 92 5 view .LVU197
 687 00ac 2046     		mov	r0, r4
 688 00ae FFF7FEFF 		bl	DMMotorCaliEncoder
 689              	.LVL55:
  93:modules/motor/DMmotor/dmmotor.c ****     dm_motor_instance[idx++] = motor;
 690              		.loc 1 93 5 view .LVU198
 691 00b2 B0EE480A 		vmov.f32	s0, s16
 692 00b6 FFF7FEFF 		bl	DWT_Delay
 693              	.LVL56:
  94:modules/motor/DMmotor/dmmotor.c ****     return motor;
 694              		.loc 1 94 5 view .LVU199
  94:modules/motor/DMmotor/dmmotor.c ****     return motor;
 695              		.loc 1 94 26 is_stmt 0 view .LVU200
 696 00ba 094A     		ldr	r2, .L25+12
 697 00bc 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 698 00be 591C     		adds	r1, r3, #1
 699 00c0 1170     		strb	r1, [r2]
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 18


  94:modules/motor/DMmotor/dmmotor.c ****     return motor;
 700              		.loc 1 94 30 view .LVU201
 701 00c2 084A     		ldr	r2, .L25+16
 702 00c4 42F82340 		str	r4, [r2, r3, lsl #2]
  95:modules/motor/DMmotor/dmmotor.c **** }
 703              		.loc 1 95 5 is_stmt 1 view .LVU202
  96:modules/motor/DMmotor/dmmotor.c **** 
 704              		.loc 1 96 1 is_stmt 0 view .LVU203
 705 00c8 2046     		mov	r0, r4
 706 00ca 05B0     		add	sp, sp, #20
 707              	.LCFI9:
 708              		.cfi_def_cfa_offset 20
 709              		@ sp needed
 710 00cc BDEC028B 		vldm	sp!, {d8}
 711              	.LCFI10:
 712              		.cfi_restore 80
 713              		.cfi_restore 81
 714              		.cfi_def_cfa_offset 12
 715 00d0 30BD     		pop	{r4, r5, pc}
 716              	.LVL57:
 717              	.L26:
  96:modules/motor/DMmotor/dmmotor.c **** 
 718              		.loc 1 96 1 view .LVU204
 719 00d2 00BF     		.align	2
 720              	.L25:
 721 00d4 00000000 		.word	DMMotorDecode
 722 00d8 00000000 		.word	DMMotorLostCallback
 723 00dc CDCCCC3D 		.word	1036831949
 724 00e0 00000000 		.word	idx
 725 00e4 00000000 		.word	dm_motor_instance
 726              		.cfi_endproc
 727              	.LFE282:
 729              		.section	.text.DMMotorStop,"ax",%progbits
 730              		.align	1
 731              		.global	DMMotorStop
 732              		.syntax unified
 733              		.thumb
 734              		.thumb_func
 736              	DMMotorStop:
 737              	.LVL58:
 738              	.LFB285:
 109:modules/motor/DMmotor/dmmotor.c ****     motor->stop_flag = MOTOR_STOP;
 739              		.loc 1 109 1 is_stmt 1 view -0
 740              		.cfi_startproc
 741              		@ args = 0, pretend = 0, frame = 0
 742              		@ frame_needed = 0, uses_anonymous_args = 0
 743              		@ link register save eliminated.
 110:modules/motor/DMmotor/dmmotor.c **** }
 744              		.loc 1 110 5 view .LVU206
 110:modules/motor/DMmotor/dmmotor.c **** }
 745              		.loc 1 110 22 is_stmt 0 view .LVU207
 746 0000 0023     		movs	r3, #0
 747 0002 80F8A431 		strb	r3, [r0, #420]
 111:modules/motor/DMmotor/dmmotor.c **** 
 748              		.loc 1 111 1 view .LVU208
 749 0006 7047     		bx	lr
 750              		.cfi_endproc
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 19


 751              	.LFE285:
 753              		.section	.text.DMMotorOuterLoop,"ax",%progbits
 754              		.align	1
 755              		.global	DMMotorOuterLoop
 756              		.syntax unified
 757              		.thumb
 758              		.thumb_func
 760              	DMMotorOuterLoop:
 761              	.LVL59:
 762              	.LFB286:
 114:modules/motor/DMmotor/dmmotor.c ****     motor->motor_settings.outer_loop_type = type;
 763              		.loc 1 114 1 is_stmt 1 view -0
 764              		.cfi_startproc
 765              		@ args = 0, pretend = 0, frame = 0
 766              		@ frame_needed = 0, uses_anonymous_args = 0
 767              		@ link register save eliminated.
 115:modules/motor/DMmotor/dmmotor.c **** }
 768              		.loc 1 115 5 view .LVU210
 115:modules/motor/DMmotor/dmmotor.c **** }
 769              		.loc 1 115 43 is_stmt 0 view .LVU211
 770 0000 80F82010 		strb	r1, [r0, #32]
 116:modules/motor/DMmotor/dmmotor.c **** 
 771              		.loc 1 116 1 view .LVU212
 772 0004 7047     		bx	lr
 773              		.cfi_endproc
 774              	.LFE286:
 776              		.section	.text.DMMotorControlInit,"ax",%progbits
 777              		.align	1
 778              		.global	DMMotorControlInit
 779              		.syntax unified
 780              		.thumb
 781              		.thumb_func
 783              	DMMotorControlInit:
 784              	.LFB288:
 159:modules/motor/DMmotor/dmmotor.c ****     }
 160:modules/motor/DMmotor/dmmotor.c **** }
 161:modules/motor/DMmotor/dmmotor.c **** void DMMotorControlInit()
 162:modules/motor/DMmotor/dmmotor.c **** {
 785              		.loc 1 162 1 is_stmt 1 view -0
 786              		.cfi_startproc
 787              		@ args = 0, pretend = 0, frame = 40
 788              		@ frame_needed = 0, uses_anonymous_args = 0
 789 0000 30B5     		push	{r4, r5, lr}
 790              	.LCFI11:
 791              		.cfi_def_cfa_offset 12
 792              		.cfi_offset 4, -12
 793              		.cfi_offset 5, -8
 794              		.cfi_offset 14, -4
 795 0002 8BB0     		sub	sp, sp, #44
 796              	.LCFI12:
 797              		.cfi_def_cfa_offset 56
 163:modules/motor/DMmotor/dmmotor.c ****     char dm_task_name[5] = "dm";
 798              		.loc 1 163 5 view .LVU214
 799              		.loc 1 163 10 is_stmt 0 view .LVU215
 800 0004 46F66453 		movw	r3, #28004
 801 0008 0893     		str	r3, [sp, #32]
 802 000a 0023     		movs	r3, #0
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 20


 803 000c 8DF82430 		strb	r3, [sp, #36]
 164:modules/motor/DMmotor/dmmotor.c ****     // ÈÅçÂéÜÊâÄÊúâÁîµÊú∫ÂÆû‰æã,ÂàõÂª∫‰ªªÂä°
 165:modules/motor/DMmotor/dmmotor.c ****     if (!idx)
 804              		.loc 1 165 5 is_stmt 1 view .LVU216
 805              		.loc 1 165 9 is_stmt 0 view .LVU217
 806 0010 154B     		ldr	r3, .L35
 807 0012 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 808              		.loc 1 165 8 view .LVU218
 809 0014 2BB3     		cbz	r3, .L29
 810              	.LBB2:
 166:modules/motor/DMmotor/dmmotor.c ****         return;
 167:modules/motor/DMmotor/dmmotor.c ****     for (size_t i = 0; i < idx; i++)
 811              		.loc 1 167 17 view .LVU219
 812 0016 0025     		movs	r5, #0
 813 0018 1FE0     		b	.L30
 814              	.LVL60:
 815              	.L32:
 816              	.LBB3:
 168:modules/motor/DMmotor/dmmotor.c ****     {
 169:modules/motor/DMmotor/dmmotor.c ****         char dm_id_buff[2] = {0};
 817              		.loc 1 169 9 is_stmt 1 view .LVU220
 818              		.loc 1 169 14 is_stmt 0 view .LVU221
 819 001a 0023     		movs	r3, #0
 820 001c ADF80030 		strh	r3, [sp]	@ movhi
 170:modules/motor/DMmotor/dmmotor.c ****         __itoa(i, dm_id_buff, 10);
 821              		.loc 1 170 9 is_stmt 1 view .LVU222
 822 0020 0A22     		movs	r2, #10
 823 0022 6946     		mov	r1, sp
 824 0024 2846     		mov	r0, r5
 825 0026 FFF7FEFF 		bl	__itoa
 826              	.LVL61:
 171:modules/motor/DMmotor/dmmotor.c ****         strcat(dm_task_name, dm_id_buff);
 827              		.loc 1 171 9 view .LVU223
 828 002a 6946     		mov	r1, sp
 829 002c 08A8     		add	r0, sp, #32
 830 002e FFF7FEFF 		bl	strcat
 831              	.LVL62:
 172:modules/motor/DMmotor/dmmotor.c ****         osThreadDef(dm_task_name, DMMotorTask, osPriorityNormal, 0, 128);
 832              		.loc 1 172 9 view .LVU224
 833 0032 0DF1040C 		add	ip, sp, #4
 834 0036 0D4C     		ldr	r4, .L35+4
 835 0038 0FCC     		ldmia	r4!, {r0, r1, r2, r3}
 836 003a ACE80F00 		stmia	ip!, {r0, r1, r2, r3}
 837 003e 94E80700 		ldm	r4, {r0, r1, r2}
 838 0042 8CE80700 		stm	ip, {r0, r1, r2}
 173:modules/motor/DMmotor/dmmotor.c ****         dm_task_handle[i] = osThreadCreate(osThread(dm_task_name), dm_motor_instance[i]);
 839              		.loc 1 173 9 view .LVU225
 840              		.loc 1 173 29 is_stmt 0 view .LVU226
 841 0046 0A4B     		ldr	r3, .L35+8
 842 0048 53F82510 		ldr	r1, [r3, r5, lsl #2]
 843 004c 01A8     		add	r0, sp, #4
 844 004e FFF7FEFF 		bl	osThreadCreate
 845              	.LVL63:
 846              		.loc 1 173 27 discriminator 1 view .LVU227
 847 0052 084B     		ldr	r3, .L35+12
 848 0054 43F82500 		str	r0, [r3, r5, lsl #2]
 849              	.LBE3:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 21


 167:modules/motor/DMmotor/dmmotor.c ****     {
 850              		.loc 1 167 34 is_stmt 1 discriminator 3 view .LVU228
 851 0058 0135     		adds	r5, r5, #1
 852              	.LVL64:
 853              	.L30:
 167:modules/motor/DMmotor/dmmotor.c ****     {
 854              		.loc 1 167 26 discriminator 1 view .LVU229
 855 005a 034B     		ldr	r3, .L35
 856 005c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 857 005e AB42     		cmp	r3, r5
 858 0060 DBD8     		bhi	.L32
 859              	.LVL65:
 860              	.L29:
 167:modules/motor/DMmotor/dmmotor.c ****     {
 861              		.loc 1 167 26 is_stmt 0 discriminator 1 view .LVU230
 862              	.LBE2:
 174:modules/motor/DMmotor/dmmotor.c ****     }
 175:modules/motor/DMmotor/dmmotor.c **** }...
 863              		.loc 1 175 1 view .LVU231
 864 0062 0BB0     		add	sp, sp, #44
 865              	.LCFI13:
 866              		.cfi_def_cfa_offset 12
 867              		@ sp needed
 868 0064 30BD     		pop	{r4, r5, pc}
 869              	.L36:
 870 0066 00BF     		.align	2
 871              	.L35:
 872 0068 00000000 		.word	idx
 873 006c 00000000 		.word	.LANCHOR0
 874 0070 00000000 		.word	dm_motor_instance
 875 0074 00000000 		.word	dm_task_handle
 876              		.cfi_endproc
 877              	.LFE288:
 879              		.section	.rodata.str1.4,"aMS",%progbits,1
 880              		.align	2
 881              	.LC0:
 882 0000 646D5F74 		.ascii	"dm_task_name\000"
 882      61736B5F 
 882      6E616D65 
 882      00
 883              		.section	.bss.dm_task_handle,"aw",%nobits
 884              		.align	2
 887              	dm_task_handle:
 888 0000 00000000 		.space	16
 888      00000000 
 888      00000000 
 888      00000000 
 889              		.section	.bss.dm_motor_instance,"aw",%nobits
 890              		.align	2
 893              	dm_motor_instance:
 894 0000 00000000 		.space	16
 894      00000000 
 894      00000000 
 894      00000000 
 895              		.section	.bss.idx,"aw",%nobits
 898              	idx:
 899 0000 00       		.space	1
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 22


 900              		.section	.rodata
 901              		.align	2
 902              		.set	.LANCHOR0,. + 0
 903              	.LC2:
 904 0000 00000000 		.word	.LC0
 905 0004 00000000 		.word	DMMotorTask
 906 0008 0000     		.short	0
 907 000a 0000     		.space	2
 908 000c 00000000 		.word	0
 909 0010 80000000 		.word	128
 910 0014 00000000 		.word	0
 911 0018 00000000 		.word	0
 912              		.text
 913              	.Letext0:
 914              		.file 2 "D:/Msys2/mingw64/arm-none-eabi/include/machine/_default_types.h"
 915              		.file 3 "D:/Msys2/mingw64/arm-none-eabi/include/sys/_stdint.h"
 916              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 917              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 918              		.file 6 "D:/Msys2/mingw64/lib/gcc/arm-none-eabi/13.3.0/include/stddef.h"
 919              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_can.h"
 920              		.file 8 "bsp/can/bsp_can.h"
 921              		.file 9 "modules/algorithm/controller.h"
 922              		.file 10 "modules/motor/motor_def.h"
 923              		.file 11 "modules/daemon/daemon.h"
 924              		.file 12 "modules/motor/DMmotor/dmmotor.h"
 925              		.file 13 "Middlewares/Third_Party/FreeRTOS/Source/portable/GCC/ARM_CM4F/portmacro.h"
 926              		.file 14 "Middlewares/Third_Party/FreeRTOS/Source/include/FreeRTOS.h"
 927              		.file 15 "Middlewares/Third_Party/FreeRTOS/Source/include/task.h"
 928              		.file 16 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.h"
 929              		.file 17 "D:/Msys2/mingw64/arm-none-eabi/include/string.h"
 930              		.file 18 "D:/Msys2/mingw64/arm-none-eabi/include/stdlib.h"
 931              		.file 19 "bsp/dwt/bsp_dwt.h"
 932              		.file 20 "<built-in>"
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s 			page 23


DEFINED SYMBOLS
                            *ABS*:00000000 dmmotor.c
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:21     .text.float_to_uint:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:26     .text.float_to_uint:00000000 float_to_uint
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:67     .text.uint_to_float:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:72     .text.uint_to_float:00000000 uint_to_float
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:111    .text.DMMotorLostCallback:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:116    .text.DMMotorLostCallback:00000000 DMMotorLostCallback
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:130    .text.DMMotorSetMode:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:135    .text.DMMotorSetMode:00000000 DMMotorSetMode
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:173    .text.DMMotorDecode:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:178    .text.DMMotorDecode:00000000 DMMotorDecode
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:295    .text.DMMotorDecode:00000098 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:301    .text.DMMotorTask:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:307    .text.DMMotorTask:00000000 DMMotorTask
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:472    .text.DMMotorTask:000000e8 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:479    .text.DMMotorCaliEncoder:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:485    .text.DMMotorCaliEncoder:00000000 DMMotorCaliEncoder
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:514    .text.DMMotorCaliEncoder:00000014 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:519    .text.DMMotorSetRef:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:525    .text.DMMotorSetRef:00000000 DMMotorSetRef
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:542    .text.DMMotorEnable:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:548    .text.DMMotorEnable:00000000 DMMotorEnable
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:566    .text.DMMotorInit:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:572    .text.DMMotorInit:00000000 DMMotorInit
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:721    .text.DMMotorInit:000000d4 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:898    .bss.idx:00000000 idx
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:893    .bss.dm_motor_instance:00000000 dm_motor_instance
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:730    .text.DMMotorStop:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:736    .text.DMMotorStop:00000000 DMMotorStop
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:754    .text.DMMotorOuterLoop:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:760    .text.DMMotorOuterLoop:00000000 DMMotorOuterLoop
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:777    .text.DMMotorControlInit:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:783    .text.DMMotorControlInit:00000000 DMMotorControlInit
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:872    .text.DMMotorControlInit:00000068 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:887    .bss.dm_task_handle:00000000 dm_task_handle
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:880    .rodata.str1.4:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:884    .bss.dm_task_handle:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:890    .bss.dm_motor_instance:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:899    .bss.idx:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc4TMFDT.s:901    .rodata:00000000 $d

UNDEFINED SYMBOLS
CANTransmit
DaemonReload
osDelay
DWT_Delay
malloc
memset
PIDInit
CANRegister
DaemonRegister
__itoa
strcat
osThreadCreate
